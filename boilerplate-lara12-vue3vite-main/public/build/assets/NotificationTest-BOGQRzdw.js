import{d as C,u as U,q as L,N as M,r as c,C as _,A as V,z as E,o as l,c as d,a as e,i as A,e as m,j as p,t as a,K as D,s as N,h as f,k as R,F as q,l as z,G as B}from"./app-Kf_TfGnx.js";const F={class:"container mx-auto"},I={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},P={class:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6"},$={class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},j=["disabled"],G={key:0},H={key:1},K={class:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6"},W={class:"space-y-4"},Y={class:"flex items-center gap-2"},J={class:"text-sm text-gray-700 dark:text-gray-300 capitalize"},O={class:"block px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 rounded border border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200"},Q={class:"text-sm space-y-1"},X={class:"text-gray-700 dark:text-gray-300"},Z={class:"text-gray-700 dark:text-gray-300"},ee={class:"text-gray-700 dark:text-gray-300"},te={key:0,class:"pt-4 border-t border-gray-200 dark:border-gray-700"},se={class:"text-sm space-y-1 bg-green-50 dark:bg-green-900/20 p-3 rounded border border-green-200 dark:border-green-800"},re={class:"font-medium text-green-800 dark:text-green-300"},ae={class:"text-green-700 dark:text-green-400"},oe={class:"text-xs text-green-600 dark:text-green-500"},le={class:"mt-6 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6"},de={key:0,class:"text-center py-8 text-gray-500 dark:text-gray-400"},ie={key:1,class:"space-y-3"},ne={class:"flex-1 min-w-0"},ge={class:"font-medium text-gray-900 dark:text-white"},ue={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},ce={class:"text-xs text-gray-500 dark:text-gray-500 mt-2"},me=C({__name:"NotificationTest",setup(be){const T=U();L();const k=M(),s=c({user_id:"",title:"Test Notification",message:"This is a test notification from the notification testing page.",type:"notification"}),b=c(!1),u=c("connecting"),y=c(null),v=c([]),g=_(()=>T.user),x=_(()=>({host:"0.0.0.0",port:"8080",forceTLS:!1})),S=async()=>{var o,t,i;b.value=!0;try{const n={user_id:s.value.user_id||((o=g.value)==null?void 0:o.id),title:s.value.title,message:s.value.message,type:s.value.type};await B.post("/v1/settings/notifications/test",n),k.addToast("Test notification sent successfully!","success"),s.value.title="Test Notification",s.value.message="This is a test notification from the notification testing page.",s.value.type="notification"}catch(n){console.error("Error sending notification:",n),k.addToast(((i=(t=n.response)==null?void 0:t.data)==null?void 0:i.message)||"Failed to send notification","error")}finally{b.value=!1}},h=o=>o?new Date(o).toLocaleString():"";return V(()=>{var o;if((o=g.value)!=null&&o.id&&window.Echo){const t=`App.Models.User.${g.value.id}`;window.Echo.connector.pusher.connection.bind("state_change",i=>{u.value=i.current}),u.value=window.Echo.connector.pusher.connection.state,console.log(`Notification test page listening on: ${t}`)}}),E(()=>{}),(o,t)=>{var i,n,w;return l(),d("div",F,[t[19]||(t[19]=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Notification Testing"),e("p",{class:"mt-2 text-sm text-gray-600 dark:text-gray-400"}," Test real-time notifications using Laravel Reverb private channels ")],-1)),e("div",I,[e("div",P,[t[9]||(t[9]=e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"}," Send Test Notification ",-1)),e("form",{onSubmit:A(S,["prevent"]),class:"space-y-4"},[e("div",null,[t[4]||(t[4]=e("label",{for:"user_id",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"}," User ID ",-1)),m(e("input",{type:"text",id:"user_id","onUpdate:modelValue":t[0]||(t[0]=r=>s.value.user_id=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",placeholder:"Enter user ID or leave empty for current user"},null,512),[[p,s.value.user_id]]),e("p",$," Current user: "+a((i=g.value)==null?void 0:i.id)+" ("+a((n=g.value)==null?void 0:n.name)+") ",1)]),e("div",null,[t[5]||(t[5]=e("label",{for:"title",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"}," Title ",-1)),m(e("input",{type:"text",id:"title","onUpdate:modelValue":t[1]||(t[1]=r=>s.value.title=r),required:"",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",placeholder:"Notification title"},null,512),[[p,s.value.title]])]),e("div",null,[t[6]||(t[6]=e("label",{for:"message",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"}," Message ",-1)),m(e("textarea",{id:"message","onUpdate:modelValue":t[2]||(t[2]=r=>s.value.message=r),required:"",rows:"4",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",placeholder:"Notification message"},null,512),[[p,s.value.message]])]),e("div",null,[t[8]||(t[8]=e("label",{for:"type",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"}," Type ",-1)),m(e("select",{id:"type","onUpdate:modelValue":t[3]||(t[3]=r=>s.value.type=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},t[7]||(t[7]=[e("option",{value:"notification"},"Notification",-1),e("option",{value:"toast"},"Toast",-1)]),512),[[D,s.value.type]])]),e("button",{type:"submit",disabled:b.value,class:"w-full text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800 disabled:opacity-50 disabled:cursor-not-allowed"},[b.value?(l(),d("span",H,"Sending...")):(l(),d("span",G,"Send Notification"))],8,j)],32)]),e("div",K,[t[17]||(t[17]=e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"}," WebSocket Status ",-1)),e("div",W,[e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-900 dark:text-white mb-2"}," Connection Status ",-1)),e("div",Y,[e("div",{class:N(["w-3 h-3 rounded-full",u.value==="connected"?"bg-green-500":u.value==="connecting"?"bg-yellow-500":"bg-red-500"])},null,2),e("span",J,a(u.value),1)])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-900 dark:text-white mb-2"}," Private Channel ",-1)),e("code",O," App.Models.User."+a((w=g.value)==null?void 0:w.id),1)]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-900 dark:text-white mb-2"}," Reverb Config ",-1)),e("div",Q,[e("p",X,[t[12]||(t[12]=e("span",{class:"font-medium"},"Host:",-1)),f(" "+a(x.value.host),1)]),e("p",Z,[t[13]||(t[13]=e("span",{class:"font-medium"},"Port:",-1)),f(" "+a(x.value.port),1)]),e("p",ee,[t[14]||(t[14]=e("span",{class:"font-medium"},"TLS:",-1)),f(" "+a(x.value.forceTLS?"Yes":"No"),1)])])]),y.value?(l(),d("div",te,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-900 dark:text-white mb-2"}," Last Received ",-1)),e("div",se,[e("p",re,a(y.value.title),1),e("p",ae,a(y.value.message),1),e("p",oe,a(h(y.value.created_at)),1)])])):R("",!0)])])]),e("div",le,[t[18]||(t[18]=e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"}," Recent Notifications ",-1)),v.value.length===0?(l(),d("div",de," No notifications received yet. Send a test notification to see it appear here. ")):(l(),d("div",ie,[(l(!0),d(q,null,z(v.value,r=>(l(),d("div",{key:r.id,class:"flex items-start gap-3 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600"},[e("div",{class:N(["w-2 h-2 mt-2 rounded-full flex-shrink-0",r.type==="success"?"bg-green-500":r.type==="error"?"bg-red-500":r.type==="warning"?"bg-yellow-500":"bg-blue-500"])},null,2),e("div",ne,[e("p",ge,a(r.title),1),e("p",ue,a(r.message),1),e("p",ce,a(h(r.created_at)),1)])]))),128))]))])])}}});export{me as default};
