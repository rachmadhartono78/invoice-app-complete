import{_ as h,G as m,o as l,a as g,b as t,f as k,j as p,v as c,F as b,m as f,t as i,k as x}from"./app-Bp1oJ4sm.js";const _={name:"PaymentIndex",data(){return{payments:[],loading:!1,filters:{search:"",date_from:"",date_to:""},pagination:{current_page:1,last_page:1,per_page:15,total:0,from:0,to:0}}},mounted(){this.load()},methods:{async load(){var s,e;this.loading=!0;try{const d={page:this.pagination.current_page,per_page:this.pagination.per_page,...this.filters},{data:o}=await m.get("/payments",{params:d});this.payments=o.data||[],this.pagination={current_page:o.current_page||1,last_page:o.last_page||1,per_page:o.per_page||15,total:o.total||0,from:o.from||0,to:o.to||0}}catch(d){console.error("Failed to load payments:",d),this.payments=[];const o=((e=(s=d.response)==null?void 0:s.data)==null?void 0:e.message)||"Failed to load payments";this.$emit("showToast",o,"error")}finally{this.loading=!1}},changePage(s){s>=1&&s<=this.pagination.last_page&&(this.pagination.current_page=s,this.load())},formatDate(s){return new Date(s).toLocaleDateString("id-ID")},formatCurrency(s){return"Rp "+Number(s).toLocaleString("id-ID")},formatMethod(s){return{cash:"Cash",bank_transfer:"Bank Transfer",check:"Check",giro:"Giro",credit_card:"Credit Card",other:"Other"}[s]||s},async confirmDelete(s){var e,d;if(confirm("Are you sure you want to delete this payment?"))try{await m.delete(`/payments/${s.id}`),this.$emit("showToast","Payment deleted successfully","success"),this.load()}catch(o){const a=((d=(e=o.response)==null?void 0:e.data)==null?void 0:d.message)||"Failed to delete payment";this.$emit("showToast",a,"error")}}}},v={class:"p-6"},w={class:"flex justify-between mb-6"},C={class:"flex gap-4 mb-4"},D={class:"bg-white dark:bg-gray-800 rounded shadow overflow-x-auto"},P={class:"w-full"},V={key:0,class:"border-t dark:border-gray-700"},I={key:1,class:"border-t dark:border-gray-700"},M={class:"p-3 dark:text-gray-300"},N={class:"p-3 dark:text-gray-300"},T={class:"p-3 dark:text-gray-300"},j={class:"p-3 text-right dark:text-gray-300"},B={class:"p-3 dark:text-gray-300"},F={class:"p-3"},S={class:"flex gap-2 justify-center"},A=["onClick"],L=["onClick"],U=["onClick"],E={key:0,class:"mt-4 flex justify-between items-center dark:text-gray-300"},G={class:"flex gap-2"},R=["disabled"],H=["disabled"];function O(s,e,d,o,a,n){return l(),g("div",v,[t("div",w,[e[10]||(e[10]=t("h1",{class:"text-2xl font-bold dark:text-white"},"Payments",-1)),t("button",{onClick:e[0]||(e[0]=r=>s.$router.push("/app/invoices/payments/create")),class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center gap-2"},e[9]||(e[9]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),k(" Record Payment ")]))]),t("div",C,[p(t("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>a.filters.search=r),onInput:e[2]||(e[2]=(...r)=>n.load&&n.load(...r)),placeholder:"Search by payment number, invoice...",class:"border dark:border-gray-600 px-3 py-2 rounded flex-1 dark:bg-gray-700 dark:text-white"},null,544),[[c,a.filters.search]]),p(t("input",{"onUpdate:modelValue":e[3]||(e[3]=r=>a.filters.date_from=r),type:"date",onChange:e[4]||(e[4]=(...r)=>n.load&&n.load(...r)),class:"border dark:border-gray-600 px-3 py-2 rounded dark:bg-gray-700 dark:text-white"},null,544),[[c,a.filters.date_from]]),p(t("input",{"onUpdate:modelValue":e[5]||(e[5]=r=>a.filters.date_to=r),type:"date",onChange:e[6]||(e[6]=(...r)=>n.load&&n.load(...r)),class:"border dark:border-gray-600 px-3 py-2 rounded dark:bg-gray-700 dark:text-white"},null,544),[[c,a.filters.date_to]])]),t("div",D,[t("table",P,[e[13]||(e[13]=t("thead",{class:"bg-gray-100 dark:bg-gray-700"},[t("tr",null,[t("th",{class:"p-3 text-left dark:text-gray-200"},"Payment #"),t("th",{class:"p-3 text-left dark:text-gray-200"},"Date"),t("th",{class:"p-3 text-left dark:text-gray-200"},"Invoice #"),t("th",{class:"p-3 text-right dark:text-gray-200"},"Amount"),t("th",{class:"p-3 text-left dark:text-gray-200"},"Method"),t("th",{class:"p-3 text-center dark:text-gray-200"},"Actions")])],-1)),t("tbody",null,[a.loading?(l(),g("tr",V,e[11]||(e[11]=[t("td",{colspan:"6",class:"p-4 text-center dark:text-gray-300"},"Loading...",-1)]))):a.payments.length?(l(!0),g(b,{key:2},f(a.payments,r=>{var u;return l(),g("tr",{key:r.id,class:"border-t dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"},[t("td",M,i(r.payment_number),1),t("td",N,i(n.formatDate(r.payment_date)),1),t("td",T,i((u=r.invoice)==null?void 0:u.invoice_number),1),t("td",j,i(n.formatCurrency(r.amount)),1),t("td",B,i(n.formatMethod(r.payment_method)),1),t("td",F,[t("div",S,[t("button",{onClick:y=>s.$router.push(`/app/invoices/payments/${r.id}`),class:"text-blue-600 dark:text-blue-400",title:"View"}," ðŸ‘ ",8,A),t("button",{onClick:y=>s.$router.push(`/app/invoices/payments/${r.id}/edit`),class:"text-green-600 dark:text-green-400",title:"Edit"}," âœï¸ ",8,L),t("button",{onClick:y=>n.confirmDelete(r),class:"text-red-600 dark:text-red-400",title:"Delete"}," ðŸ—‘ ",8,U)])])])}),128)):(l(),g("tr",I,e[12]||(e[12]=[t("td",{colspan:"6",class:"p-4 text-center text-gray-500 dark:text-gray-400"},"No payments found",-1)])))])])]),a.pagination.total>0?(l(),g("div",E,[t("div",null," Showing "+i(a.pagination.from)+" to "+i(a.pagination.to)+" of "+i(a.pagination.total)+" entries ",1),t("div",G,[t("button",{onClick:e[7]||(e[7]=r=>n.changePage(a.pagination.current_page-1)),disabled:a.pagination.current_page===1,class:"px-3 py-1 border dark:border-gray-600 rounded disabled:opacity-50 dark:bg-gray-700"}," Previous ",8,R),t("button",{onClick:e[8]||(e[8]=r=>n.changePage(a.pagination.current_page+1)),disabled:a.pagination.current_page===a.pagination.last_page,class:"px-3 py-1 border dark:border-gray-600 rounded disabled:opacity-50 dark:bg-gray-700"}," Next ",8,H)])])):x("",!0)])}const z=h(_,[["render",O]]);export{z as default};
