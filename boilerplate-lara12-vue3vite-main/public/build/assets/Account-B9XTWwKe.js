import{_ as S,u as T,a as t,e as V,b as e,k as i,i as p,j as c,v as y,F as m,m as g,n as u,f as h,g as $,o,t as l}from"./app-DSMprFLy.js";const M={setup(){return{authStore:T()}},data:()=>({data:null,devices:[],dialogConfirmation:!1,messageDialog:"Apakah anda yakin dengan aksi ini?",titleDialog:"Konfirmasi",typeModal:null,selectedId:null,loading:!1,newPassword:"",confirmPassword:"",emailIdentifiers:[],phoneIdentifiers:[],usernameIdentifiers:[]}),created(){},mounted(){this.getUser()},watch:{},methods:{getUser(){this.loading=!0,this.email,this.password,this.device_name,this.axios.get(`v1/master/user/${this.authStore.user.id}`).then(a=>{var r;this.data=a.data,this.devices=a.devices,(r=a.data)!=null&&r.identifiers&&(this.emailIdentifiers=a.data.identifiers.filter(d=>d.type==="email"&&d.value!==a.data.email&&!d.deleted_at).map(d=>({id:d.id,type:d.type,value:d.value,verified_at:d.verified_at})),this.phoneIdentifiers=a.data.identifiers.filter(d=>d.type==="phone"&&d.value!==a.data.phone&&!d.deleted_at).map(d=>({id:d.id,type:d.type,value:d.value,verified_at:d.verified_at})),this.usernameIdentifiers=a.data.identifiers.filter(d=>d.type==="username"&&!d.deleted_at).map(d=>({id:d.id,type:d.type,value:d.value,verified_at:d.verified_at}))),this.loading=!1}).catch(a=>{this.loading=!1,console.error("Error fetching user data:",a)}).finally(()=>{})},handleDialogConfirmation(a,r){switch(this.typeModal=r,r){case"revoke":this.messageDialog="Apakah anda yakin ingin menghapus sesi ini?",this.titleDialog="Konfirmasi hapus sesi";break}this.selectedId=a,this.dialogConfirmation=!0},handleOnClose(a){if(this.loading=!0,a===!0)switch(this.typeModal){case"revoke":this.revokeToken(this.selectedId);break}else this.dialogConfirmation=!1},handlePasswordChange(){if(this.newPassword!==this.confirmPassword){this.$emit("showToast","Password baru dan konfirmasi password tidak cocok!","error");return}this.loading=!0;const a={new_password:this.newPassword,new_password_confirmation:this.confirmPassword};this.axios.put(`v1/master/user/${this.authStore.user.id}/password`,a).then(r=>{this.newPassword="",this.confirmPassword="",this.$emit("showToast",r.message||"Password berhasil diubah!","success")}).catch(r=>{console.error("Error changing password:",r),this.$emit("showToast","Gagal mengubah password!","error")}).finally(()=>{this.loading=!1})},handlePhoneChange(){this.loading=!0;const a={new_phone:`${this.data.phone}`};this.axios.put(`v1/master/user/${this.authStore.user.id}/phone`,a).then(r=>{this.getUser(),this.$emit("showToast",r.message||"Nomor telepon berhasil diubah!","success")}).catch(r=>{console.error("Error updating phone number:",r),this.$emit("showToast","Gagal mengubah nomor telepon!","error")}).finally(()=>{this.loading=!1})},revokeToken(a){this.axios.delete(`v1/master/user/${this.authStore.user.id}/revoke/${a}`).then(r=>{this.dialogConfirmation=!1,this.getUser(),this.loading=!1,this.$emit("showToast",r.message||"Berhasil menghapus sesi!","success")}).catch(r=>{console.error("Error revoking token:",r),this.loading=!1})}}},B={class:"grid grid-cols-1 px-4 pt-6 xl:grid-cols-3 xl:gap-4 dark:bg-gray-900"},N={class:"col-span-full xl:col-auto"},Z={class:"p-4 mb-4 bg-white border border-gray-200 rounded-lg shadow-sm 2xl:col-span-2 dark:border-gray-700 sm:p-6 dark:bg-gray-800"},z={class:"items-center sm:flex xl:block 2xl:flex sm:space-x-4 xl:space-x-0 2xl:space-x-4"},D=["src"],H={key:1,class:"relative w-28 h-28 overflow-hidden bg-gray-100 rounded-full dark:bg-gray-600"},U={class:"col-span-2"},E={key:0,class:"p-4 mb-4 bg-white border border-gray-200 rounded-lg shadow-sm 2xl:col-span-2 dark:border-gray-700 sm:p-6 dark:bg-gray-800"},O={class:"grid grid-cols-6 gap-6"},q={class:"col-span-6 sm:col-span-3"},A=["value"],K={class:"col-span-6 sm:col-span-3"},L=["value"],j={class:"col-span-6 sm:col-span-3"},F=["value"],G={class:"col-span-6 sm:col-span-3"},R={key:0,class:"col-span-6"},J={class:"bg-gray-100 text-gray-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded-sm dark:bg-gray-700 dark:text-gray-300"},Q={key:1,class:"col-span-6"},W={class:"bg-gray-100 text-gray-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded-sm dark:bg-gray-700 dark:text-gray-300"},X={key:2,class:"col-span-6"},Y={class:"bg-gray-100 text-gray-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded-sm dark:bg-gray-700 dark:text-gray-300"},ee={class:"col-span-6 sm:col-span-6"},re={class:"text-sm"},ae={class:"bg-gray-100 text-gray-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded-sm dark:bg-gray-700 dark:text-gray-300"},se={class:"col-span-6 sm:col-span-6"},te={class:"text-sm"},oe={class:"bg-gray-100 text-gray-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded-sm dark:bg-gray-700 dark:text-gray-300"},de={class:"col-span-6 sm:col-span-6"},ie=["disabled"],le={class:"p-4 mb-4 bg-white border border-gray-200 rounded-lg shadow-sm 2xl:col-span-2 dark:border-gray-700 sm:p-6 dark:bg-gray-800"},ne={class:"grid grid-cols-6 gap-6"},me={class:"col-span-6 sm:col-span-3"},ge={key:0},ue={key:0,class:"text-red-600 flex items-start mt-2"},he={class:"col-span-6 sm:col-span-3"},pe={key:0},ce={key:0,class:"text-gray-500 mt-2"},ye={key:1,class:"text-red-600 flex items-center mt-2"},be={key:2,class:"text-green-600 flex items-center mt-2"},fe={class:"col-span-6 sm:col-full"},we=["disabled"],ke={class:"p-4 mb-4 bg-white border border-gray-200 rounded-lg shadow-sm 2xl:col-span-2 dark:border-gray-700 sm:p-6 dark:bg-gray-800"},xe={class:"flow-root"},ve={class:"divide-y divide-gray-200 dark:divide-gray-700"},_e={class:"flex items-center space-x-4"},Pe={class:"flex-shrink-0"},Ce={class:"flex-1 min-w-0"},Ie={key:0,class:"text-sm font-normal text-gray-500 truncate dark:text-gray-400"},Se={key:1,class:"text-sm font-normal text-gray-500 truncate dark:text-gray-400"},Te={key:2,class:"flex items-center text-sm font-medium text-green-600 truncate dark:text-green-400"},Ve={class:"text-sm font-normal text-gray-500 truncate dark:text-gray-400"},$e={class:"inline-flex items-center"},Me=["onClick"];function Be(a,r,d,Ne,Ze,n){var b,f,w,k,x,v,_,P,C;const I=$("confirmation-dialog");return o(),t("div",B,[V(I,{isVisible:a.dialogConfirmation,title:"Konfirmasi",loading:a.loading,message:a.messageDialog,onOnClose:r[0]||(r[0]=s=>n.handleOnClose(s))},null,8,["isVisible","loading","message"]),r[27]||(r[27]=e("div",{class:"mb-4 col-span-full xl:mb-2"},[e("h1",{class:"text-xl font-semibold text-gray-900 sm:text-2xl dark:text-white"},"Pengaturan Akun")],-1)),e("div",N,[e("div",Z,[e("div",z,[(b=a.data)!=null&&b.avatar?(o(),t("img",{key:0,class:"mb-4 rounded-lg w-28 h-28 sm:mb-0 xl:mb-4 2xl:mb-0",src:(f=a.data)==null?void 0:f.avatar,alt:"Profile Picture"},null,8,D)):(o(),t("div",H,r[6]||(r[6]=[e("svg",{class:"absolute w-30 h-30 text-gray-400 top-3",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule":"evenodd"})],-1)]))),e("div",null,[i("",!0)])])])]),e("div",U,[a.data?(o(),t("div",E,[r[17]||(r[17]=e("h3",{class:"mb-4 text-xl font-semibold dark:text-white"},"Informasi Umum",-1)),e("form",{onSubmit:r[2]||(r[2]=p((...s)=>n.handlePhoneChange&&n.handlePhoneChange(...s),["prevent"]))},[e("div",O,[e("div",q,[r[8]||(r[8]=e("label",{for:"first-name",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Nama Lengkap",-1)),e("input",{type:"text",name:"first-name",id:"first-name",value:(w=a.data)==null?void 0:w.name,disabled:"",readonly:"",class:"shadow-sm bg-gray-100 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-gray-400 cursor-not-allowed dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Nama lengkap",required:""},null,8,A)]),e("div",K,[r[9]||(r[9]=e("label",{for:"organization",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Nomor Induk",-1)),e("input",{type:"text",name:"organization",id:"organization",disabled:"",readonly:"",value:(k=a.data)==null?void 0:k.registration_number,class:"shadow-sm bg-gray-100 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-gray-400 cursor-not-allowed dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:""},null,8,L)]),e("div",j,[r[10]||(r[10]=e("label",{for:"email",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Email",-1)),e("input",{type:"email",name:"email",id:"email",disabled:"",readonly:"",value:(x=a.data)==null?void 0:x.email,class:"shadow-sm bg-gray-100 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-gray-400 cursor-not-allowed dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Email",required:""},null,8,F)]),e("div",G,[r[11]||(r[11]=e("label",{for:"phone-number",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"No. HP",-1)),c(e("input",{type:"number",name:"phone-number",id:"phone-number","onUpdate:modelValue":r[1]||(r[1]=s=>a.data.phone=s),class:"shadow-sm bg-white border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"",required:""},null,512),[[y,a.data.phone]])]),a.emailIdentifiers.length>0?(o(),t("div",R,[r[12]||(r[12]=e("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Email Tambahan",-1)),e("ul",null,[(o(!0),t(m,null,g(a.emailIdentifiers,s=>(o(),t("li",{class:"text-sm mb-1",key:s.id},[e("span",J," • "+l(s.value),1)]))),128))])])):i("",!0),a.phoneIdentifiers.length>0?(o(),t("div",Q,[r[13]||(r[13]=e("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"No. HP Tambahan",-1)),e("ul",null,[(o(!0),t(m,null,g(a.phoneIdentifiers,s=>(o(),t("li",{class:"text-sm mb-1",key:s.id},[e("span",W," • "+l(s.value),1)]))),128))])])):i("",!0),a.usernameIdentifiers.length>0?(o(),t("div",X,[r[14]||(r[14]=e("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Username Tambahan",-1)),e("ul",null,[(o(!0),t(m,null,g(a.usernameIdentifiers,s=>(o(),t("li",{class:"text-sm mb-1",key:s.id},[e("span",Y," • "+l(s.value),1)]))),128))])])):i("",!0),e("div",ee,[r[15]||(r[15]=e("label",{for:"organization",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Organisasi",-1)),e("ul",null,[(o(!0),t(m,null,g((v=a.data)==null?void 0:v.organizations,s=>(o(),t("li",re,[e("span",ae,"• "+l(s.name),1)]))),256))])]),e("div",se,[r[16]||(r[16]=e("label",{for:"organization",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Otoritas",-1)),e("ul",null,[(o(!0),t(m,null,g((_=a.data)==null?void 0:_.authorities,s=>(o(),t("li",te,[e("span",oe,"• "+l(s.name),1)]))),256))])]),e("div",de,[e("button",{disabled:!((P=a.data)!=null&&P.phone),class:u(["text-white font-medium rounded-lg text-sm px-5 py-2.5 text-center",(C=a.data)!=null&&C.phone?"bg-primary-700 hover:bg-primary-800 focus:ring-4 focus:ring-primary-300 dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800":"bg-gray-400 cursor-not-allowed"]),type:"submit"},"Simpan",10,ie)])])],32)])):i("",!0),e("div",le,[r[23]||(r[23]=e("h3",{class:"mb-4 text-xl font-semibold dark:text-white"},"Reset Password",-1)),e("form",{onSubmit:r[5]||(r[5]=p((...s)=>n.handlePasswordChange&&n.handlePasswordChange(...s),["prevent"]))},[e("div",ne,[e("div",me,[r[19]||(r[19]=e("label",{for:"current-password",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Password baru",-1)),c(e("input",{type:"password",name:"current-password",id:"current-password","onUpdate:modelValue":r[3]||(r[3]=s=>a.newPassword=s),class:"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"••••••••",required:""},null,512),[[y,a.newPassword]]),a.newPassword?(o(),t("span",ge,[a.newPassword.length<8?(o(),t("small",ue,r[18]||(r[18]=[e("svg",{class:"w-6 h-6 mr-1","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{"fill-rule":"evenodd",d:"M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm11-4a1 1 0 1 0-2 0v5a1 1 0 1 0 2 0V8Zm-1 7a1 1 0 1 0 0 2h.01a1 1 0 1 0 0-2H12Z","clip-rule":"evenodd"})],-1),h(" Password harus memiliki minimal 8 karakter, termasuk huruf besar, huruf kecil, angka, dan simbol.")]))):i("",!0)])):i("",!0)]),e("div",he,[r[22]||(r[22]=e("label",{for:"confirm-password",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Konfirmasi password baru",-1)),c(e("input",{type:"password",name:"confirm-password",id:"confirm-password","onUpdate:modelValue":r[4]||(r[4]=s=>a.confirmPassword=s),class:"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"••••••••",required:""},null,512),[[y,a.confirmPassword]]),a.newPassword?(o(),t("span",pe,[a.confirmPassword?a.newPassword!==a.confirmPassword?(o(),t("small",ye,r[20]||(r[20]=[e("svg",{class:"w-4 h-4 mr-1","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{"fill-rule":"evenodd",d:"M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm11-4a1 1 0 1 0-2 0v5a1 1 0 1 0 2 0V8Zm-1 7a1 1 0 1 0 0 2h.01a1 1 0 1 0 0-2H12Z","clip-rule":"evenodd"})],-1),h(" Password tidak cocok")]))):a.newPassword===a.confirmPassword?(o(),t("small",be,r[21]||(r[21]=[e("svg",{class:"w-3 h-3 mr-1","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{"fill-rule":"evenodd",d:"M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm13.707-1.293a1 1 0 0 0-1.414-1.414L11 12.586l-1.793-1.793a1 1 0 0 0-1.414 1.414l2.5 2.5a1 1 0 0 0 1.414 0l4-4Z","clip-rule":"evenodd"})],-1),h(" Password sudah sesuai")]))):i("",!0):(o(),t("small",ce,"Silakan masukkan konfirmasi password"))])):i("",!0)]),e("div",fe,[e("button",{disabled:!a.newPassword||!a.confirmPassword||a.newPassword!==a.confirmPassword||a.newPassword.length<8,class:u(["text-white font-medium rounded-lg text-sm px-5 py-2.5 text-center",!a.newPassword||!a.confirmPassword||a.newPassword!==a.confirmPassword||a.newPassword.length<8?"bg-gray-400 cursor-not-allowed":"bg-primary-700 hover:bg-primary-800 focus:ring-4 focus:ring-primary-300 dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800"]),type:"submit"},"Simpan",10,we)])])],32)]),e("div",ke,[e("div",xe,[r[26]||(r[26]=e("h3",{class:"text-xl font-semibold dark:text-white"},"Sesi",-1)),e("ul",ve,[(o(!0),t(m,null,g(a.devices,s=>(o(),t("li",{class:"py-4",key:s.id},[e("div",_e,[e("div",Pe,[(o(),t("svg",{class:u(["w-7 h-7",s.expires_at?"text-gray-400 dark:text-gray-600":"dark:text-white"]),"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},r[24]||(r[24]=[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9 16H5a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v1M9 12H4m8 8V9h8v11h-8Zm0 0H9m8-4a1 1 0 1 0-2 0 1 1 0 0 0 2 0Z"},null,-1)]),2))]),e("div",Ce,[e("p",{class:u(["text-base font-semibold truncate",s.expires_at?"text-gray-400 dark:text-gray-400":"text-gray-900 dark:text-white"])},l(s.device_name),3),s.expires_at?(o(),t("p",Ie," Kedaluwarsa "+l(s.expires_at),1)):s.last_used_at!=="Online"?(o(),t("p",Se,l(s.last_used_at),1)):s.last_used_at==="Online"?(o(),t("p",Te,r[25]||(r[25]=[e("svg",{class:"w-3 h-3 text-green-500 dark:text-green-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24"},[e("circle",{cx:"12",cy:"12",r:"6"})],-1),h(" Online ")]))):i("",!0),e("p",Ve,[e("small",null,"Login pertama: "+l(a.$functions.formatTanggalIndonesia(s.created_at,!0)),1)])]),e("div",$e,[e("a",{href:"#",onClick:p(ze=>n.handleDialogConfirmation(s.id,"revoke"),["prevent"]),class:u(["px-3 py-2 mb-3 mr-3 text-sm font-medium text-center text-gray-800 border rounded-lg focus:ring-4 focus:ring-primary-300 dark:text-white dark:border-gray-600",s.expires_at?"bg-red-600 text-white hover:bg-red-700 dark:bg-red-600 dark:hover:bg-red-700":"bg-white hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700"])},l(s.expires_at?"Hapus":"Revoke"),11,Me)])])]))),128))])])])])])}const He=S(M,[["render",Be]]);export{He as default};
