import{_ as y,G as u,o as i,a as d,b as t,f as h,j as x,v as k,K as _,F as m,m as b,t as o,k as g,n as f}from"./app-B6zZeFFz.js";const v={name:"CustomerIndex",data(){return{customers:[],loading:!1,filters:{search:"",is_active:""},pagination:{current_page:1,last_page:1,per_page:15,total:0,from:0,to:0}}},mounted(){this.load()},methods:{async load(){this.loading=!0;try{const a={page:this.pagination.current_page,per_page:this.pagination.per_page,...this.filters},{data:e}=await u.get("/customers",{params:a});this.customers=e.data,this.pagination={current_page:e.current_page,last_page:e.last_page,per_page:e.per_page,total:e.total,from:e.from,to:e.to}}catch(a){console.error("Failed to load customers:",a),this.$emit("showToast","Failed to load customers","error")}finally{this.loading=!1}},changePage(a){a>=1&&a<=this.pagination.last_page&&(this.pagination.current_page=a,this.load())},formatPaymentTerms(a){return{cash:"Cash",net_7:"Net 7",net_14:"Net 14",net_30:"Net 30",net_45:"Net 45",net_60:"Net 60"}[a]||a},async confirmDelete(a){var e,l;if(confirm(`Are you sure you want to delete customer "${a.name}"?`))try{await u.delete(`/customers/${a.id}`),this.$emit("showToast","Customer deleted successfully","success"),this.load()}catch(c){const r=((l=(e=c.response)==null?void 0:e.data)==null?void 0:l.message)||"Failed to delete customer";this.$emit("showToast",r,"error")}}}},w={class:"p-6"},C={class:"flex justify-between mb-6"},N={class:"flex gap-4 mb-4"},T={class:"bg-white dark:bg-gray-800 rounded shadow overflow-x-auto"},P={class:"w-full"},A={key:0,class:"border-t dark:border-gray-700"},S={key:1,class:"border-t dark:border-gray-700"},V={class:"p-3 dark:text-gray-300"},j={class:"p-3 dark:text-gray-300"},D={class:"font-medium"},F={class:"text-sm text-gray-500 dark:text-gray-400"},I={class:"p-3 dark:text-gray-300"},B={key:0},M={key:1,class:"text-sm text-gray-500 dark:text-gray-400"},E={class:"p-3 dark:text-gray-300"},L={class:"p-3 text-center"},U={class:"p-3"},z={class:"flex gap-2 justify-center"},G=["onClick"],H=["onClick"],K=["onClick"],q={key:0,class:"mt-4 flex justify-between items-center dark:text-gray-300"},J={class:"flex gap-2"},O=["disabled"],Q=["disabled"];function R(a,e,l,c,r,n){return i(),d("div",w,[t("div",C,[e[8]||(e[8]=t("h1",{class:"text-2xl font-bold dark:text-white"},"Customers",-1)),t("button",{onClick:e[0]||(e[0]=s=>a.$router.push("/app/invoices/customers/create")),class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center gap-2"},e[7]||(e[7]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),h(" New Customer ")]))]),t("div",N,[x(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>r.filters.search=s),onInput:e[2]||(e[2]=(...s)=>n.load&&n.load(...s)),placeholder:"Search by name, code, phone, email...",class:"border dark:border-gray-600 px-3 py-2 rounded flex-1 dark:bg-gray-700 dark:text-white"},null,544),[[k,r.filters.search]]),x(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>r.filters.is_active=s),onChange:e[4]||(e[4]=(...s)=>n.load&&n.load(...s)),class:"border dark:border-gray-600 px-3 py-2 rounded dark:bg-gray-700 dark:text-white"},e[9]||(e[9]=[t("option",{value:""},"All Status",-1),t("option",{value:"1"},"Active",-1),t("option",{value:"0"},"Inactive",-1)]),544),[[_,r.filters.is_active]])]),t("div",T,[t("table",P,[e[12]||(e[12]=t("thead",{class:"bg-gray-100 dark:bg-gray-700"},[t("tr",null,[t("th",{class:"p-3 text-left dark:text-gray-200"},"Code"),t("th",{class:"p-3 text-left dark:text-gray-200"},"Name"),t("th",{class:"p-3 text-left dark:text-gray-200"},"Contact"),t("th",{class:"p-3 text-left dark:text-gray-200"},"Payment Terms"),t("th",{class:"p-3 text-center dark:text-gray-200"},"Status"),t("th",{class:"p-3 text-center dark:text-gray-200"},"Actions")])],-1)),t("tbody",null,[r.loading?(i(),d("tr",A,e[10]||(e[10]=[t("td",{colspan:"6",class:"p-4 text-center dark:text-gray-300"},"Loading...",-1)]))):r.customers.length?(i(!0),d(m,{key:2},b(r.customers,s=>(i(),d("tr",{key:s.id,class:"border-t dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"},[t("td",V,o(s.code),1),t("td",j,[t("div",D,o(s.name),1),t("div",F,o(s.email),1)]),t("td",I,[s.phone?(i(),d("div",B,"ðŸ“ž "+o(s.phone),1)):g("",!0),s.contact_person?(i(),d("div",M,o(s.contact_person),1)):g("",!0)]),t("td",E,o(n.formatPaymentTerms(s.payment_terms)),1),t("td",L,[t("span",{class:f([s.is_active?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300","px-2 py-1 rounded text-xs"])},o(s.is_active?"Active":"Inactive"),3)]),t("td",U,[t("div",z,[t("button",{onClick:p=>a.$router.push(`/app/invoices/customers/${s.id}`),class:"text-blue-600 dark:text-blue-400 hover:text-blue-800",title:"View"}," ðŸ‘ ",8,G),t("button",{onClick:p=>a.$router.push(`/app/invoices/customers/${s.id}/edit`),class:"text-green-600 dark:text-green-400 hover:text-green-800",title:"Edit"}," âœï¸ ",8,H),t("button",{onClick:p=>n.confirmDelete(s),class:"text-red-600 dark:text-red-400 hover:text-red-800",title:"Delete"}," ðŸ—‘ ",8,K)])])]))),128)):(i(),d("tr",S,e[11]||(e[11]=[t("td",{colspan:"6",class:"p-4 text-center text-gray-500 dark:text-gray-400"},"No customers found",-1)])))])])]),r.pagination.total>0?(i(),d("div",q,[t("div",null," Showing "+o(r.pagination.from)+" to "+o(r.pagination.to)+" of "+o(r.pagination.total)+" entries ",1),t("div",J,[t("button",{onClick:e[5]||(e[5]=s=>n.changePage(r.pagination.current_page-1)),disabled:r.pagination.current_page===1,class:"px-3 py-1 border dark:border-gray-600 rounded disabled:opacity-50 dark:bg-gray-700"}," Previous ",8,O),t("button",{onClick:e[6]||(e[6]=s=>n.changePage(r.pagination.current_page+1)),disabled:r.pagination.current_page===r.pagination.last_page,class:"px-3 py-1 border dark:border-gray-600 rounded disabled:opacity-50 dark:bg-gray-700"}," Next ",8,Q)])])):g("",!0)])}const X=y(v,[["render",R]]);export{X as default};
