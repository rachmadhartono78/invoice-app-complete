import{s as V}from"./index-CfpBvlcq.js";import{_ as z,o as n,a as d,b as r,f as p,t as h,k as g,F as x,m as v,M,g as I,e as y,i as j,h as C,j as w,v as _,n as k}from"./app-B6zZeFFz.js";let E=0;const U={name:"IdentifierInput",props:{modelValue:{type:Array,default:()=>[]},type:{type:String,required:!0,validator:s=>["email","phone","username"].includes(s)},label:{type:String,required:!0},placeholder:{type:String,default:""},required:{type:Boolean,default:!1},inputType:{type:String,default:"text"},hideAddButton:{type:Boolean,default:!1}},data(){return{localIdentifiers:[],initialized:!1}},watch:{modelValue:{immediate:!0,handler(s){(!this.initialized||this.shouldSync(s))&&(this.syncFromParent(s),this.initialized=!0)}}},mounted(){this.localIdentifiers.length===0&&this.required&&(this.localIdentifiers=[this.createEmptyIdentifier()])},methods:{createEmptyIdentifier(){return{id:null,type:this.type,value:"",_uid:`identifier-${++E}`}},shouldSync(s){if(!s||s.length===0)return!1;if(s.length!==this.localIdentifiers.length)return!0;const e=s.filter(i=>i.id).map(i=>i.id),a=this.localIdentifiers.filter(i=>i.id).map(i=>i.id);return e.some(i=>!a.includes(i))},syncFromParent(s){if(!s||s.length===0){this.required||(this.localIdentifiers=[]);return}this.localIdentifiers=s.map(e=>({...e,_uid:e._uid||`identifier-${++E}`}))},handleInput(s,e){this.localIdentifiers[e].value=s.target.value,this.emitUpdate()},addIdentifier(){this.localIdentifiers.push(this.createEmptyIdentifier())},removeIdentifier(s){this.required&&this.localIdentifiers.length===1||(this.localIdentifiers.splice(s,1),this.emitUpdate())},emitUpdate(){const s=this.localIdentifiers.filter(e=>e.value&&e.value.trim()!=="").map(({_uid:e,...a})=>a);this.$emit("update:modelValue",s)}}},A={class:"space-y-4"},B={class:"flex justify-between items-center mb-2"},S={class:"block text-sm font-medium text-gray-900 dark:text-white"},T={key:0,class:"text-red-500 ml-1"},P={key:0,class:"text-sm text-gray-500 dark:text-gray-400 italic p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"},F={class:"flex-1"},N=["type","value","onInput","placeholder","required"],H=["onClick","disabled"];function q(s,e,a,i,t,l){return n(),d("div",A,[r("div",B,[r("label",S,[p(h(a.label)+" ",1),a.required?(n(),d("span",T,"*")):g("",!0)]),a.hideAddButton?g("",!0):(n(),d("button",{key:0,type:"button",onClick:e[0]||(e[0]=(...u)=>l.addIdentifier&&l.addIdentifier(...u)),class:"text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 text-sm font-medium flex items-center transition-colors"},e[1]||(e[1]=[r("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),p(" Tambah ")])))]),t.localIdentifiers.length===0?(n(),d("div",P," Belum ada "+h(a.label.toLowerCase())+'. Klik "Tambah" untuk menambahkan. ',1)):g("",!0),(n(!0),d(x,null,v(t.localIdentifiers,(u,c)=>(n(),d("div",{key:u._uid,class:"flex items-center gap-2 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"},[r("div",F,[r("input",{type:a.inputType,value:u.value,onInput:f=>l.handleInput(f,c),placeholder:a.placeholder,required:a.required&&c===0,class:"bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 text-gray-900 dark:text-white text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5"},null,40,N)]),t.localIdentifiers.length>1||!a.required?(n(),d("button",{key:0,type:"button",onClick:f=>l.removeIdentifier(c),class:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 p-2 transition-colors",disabled:a.required&&t.localIdentifiers.length===1},e[2]||(e[2]=[r("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,H)):g("",!0)]))),128))])}const O=z(U,[["render",q]]),D={components:{IdentifierInput:O,ConfirmationDialog:M},data(){return{loading:!1,loadingFetchUser:!1,user:{name:"",email:"",phone:"",registration_number:"",organizations:[],authorities:[]},emailIdentifiers:[],phoneIdentifiers:[],usernameIdentifiers:[],deletedEmailIdentifiers:[],deletedPhoneIdentifiers:[],deletedUsernameIdentifiers:[],organizations:[],authorities:[],dialogConfirmation:!1,typeSubmit:"",id:"",formErrors:{}}},computed:{allIdentifiers(){return[...this.emailIdentifiers,...this.phoneIdentifiers,...this.usernameIdentifiers]},isFormValid(){return this.user.name&&this.user.email&&this.user.phone&&this.user.organizations.length>0}},created(){this.id=this.$route.params.id},mounted(){this.fetchMasterData(),this.id&&this.retrieveDetail(this.id)},methods:{async fetchMasterData(){try{this.loading=!0;const[s,e]=await Promise.all([this.axios.get("v1/settings/organizations"),this.axios.get("v1/settings/authorities")]);this.organizations=s.data,this.authorities=e.data}catch(s){console.error("Error fetching master data:",s),this.$emit("showToast","Gagal memuat data master","error")}finally{this.loading=!1}},async retrieveDetail(s){this.loadingFetchUser=!0;try{const a=(await this.axios.get(`v1/master/user/${s}`)).data,i=a.authorities.map(t=>({authority:t.id,organizations:t.organizations.map(l=>l.id)}));this.user={id:a.id,name:a.name,email:a.email,phone:a.phone,registration_number:a.registration_number,organizations:a.organizations.map(t=>t.id),authorities:i},a.identifiers&&a.identifiers.length>0&&this.mapIdentifiers(a.identifiers,a.email,a.phone)}catch(e){console.error("Error fetching user:",e),this.$emit("showToast","Gagal memuat data pengguna","error")}finally{this.loadingFetchUser=!1}},mapIdentifiers(s,e,a){this.emailIdentifiers=s.filter(i=>i.type==="email"&&i.value!==e&&!i.deleted_at).map(i=>({id:i.id,type:i.type,value:i.value,verified_at:i.verified_at})),this.phoneIdentifiers=s.filter(i=>i.type==="phone"&&i.value!==a&&!i.deleted_at).map(i=>({id:i.id,type:i.type,value:i.value,verified_at:i.verified_at})),this.usernameIdentifiers=s.filter(i=>i.type==="username"&&!i.deleted_at).map(i=>({id:i.id,type:i.type,value:i.value,verified_at:i.verified_at})),this.deletedEmailIdentifiers=s.filter(i=>i.type==="email"&&i.deleted_at).map(i=>({id:i.id,type:i.type,value:i.value,deleted_at:i.deleted_at})),this.deletedPhoneIdentifiers=s.filter(i=>i.type==="phone"&&i.deleted_at).map(i=>({id:i.id,type:i.type,value:i.value,deleted_at:i.deleted_at})),this.deletedUsernameIdentifiers=s.filter(i=>i.type==="username"&&i.deleted_at).map(i=>({id:i.id,type:i.type,value:i.value,deleted_at:i.deleted_at}))},addAuthority(){var s;this.user.authorities.push({authority:null,organizations:((s=this.user)==null?void 0:s.organizations)??[]})},removeAuthority(s){this.user.authorities.splice(s,1)},handleTypeSubmit(s){console.log("handleTypeSubmit called with:",s),console.log("Form validation status:",this.isFormValid),console.log("User data:",this.user),this.typeSubmit=s,this.confirmSubmit()},confirmSubmit(){if(console.log("confirmSubmit called"),this.formErrors={},!this.isFormValid){console.log("Form validation failed"),this.$emit("showToast","Mohon lengkapi semua field yang wajib diisi","error"),this.validateForm();return}console.log("Form validation passed, showing dialog"),this.dialogConfirmation=!0},validateForm(){const s={};return this.user.name||(s.name=["Nama wajib diisi"]),this.user.email?this.isValidEmail(this.user.email)||(s.email=["Format email tidak valid"]):s.email=["Email wajib diisi"],this.user.phone||(s.phone=["Nomor telepon wajib diisi"]),(!this.user.organizations||this.user.organizations.length===0)&&(s.organizations=["Minimal satu organisasi harus dipilih"]),this.user.authorities.forEach((e,a)=>{e.authority||(s[`authorities.${a}.authority`]=["Otoritas wajib dipilih"]),(!e.organizations||e.organizations.length===0)&&(s[`authorities.${a}.organizations`]=["Minimal satu organisasi untuk otoritas ini"])}),this.formErrors=s,Object.keys(s).length===0},isValidEmail(s){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)},handleOnClose(s){s===!0?this.submit():this.dialogConfirmation=!1},async restoreIdentifier(s){var e,a;if(this.id)try{await this.axios.patch(`v1/master/user/${this.id}/identifiers/${s.id}/restore`),this.$emit("showToast","Identifier berhasil dipulihkan","success"),this.retrieveDetail(this.id)}catch(i){const t=((a=(e=i.response)==null?void 0:e.data)==null?void 0:a.message)||"Gagal memulihkan identifier";this.$emit("showToast",t,"error")}},resetForm(){this.user={name:"",email:"",phone:"",registration_number:"",organizations:[],authorities:[]},this.emailIdentifiers=[],this.phoneIdentifiers=[],this.usernameIdentifiers=[],this.deletedEmailIdentifiers=[],this.deletedPhoneIdentifiers=[],this.deletedUsernameIdentifiers=[],this.formErrors={}},async submit(){var e,a,i,t;if(!this.validateForm()){this.dialogConfirmation=!1;return}let s="v1/master/user";this.loading=!0;try{const l=this.allIdentifiers.filter(m=>m.value&&m.value.trim()!==""),u={...this.user};u.organizations&&Array.isArray(u.organizations)&&(u.organizations=u.organizations.map(m=>typeof m=="object"?m.id:m)),u.authorities&&Array.isArray(u.authorities)&&(u.authorities=u.authorities.map(m=>({...m,organizations:m.organizations?m.organizations.map(b=>typeof b=="object"?b.id:b):[]}))),l.length>0?u.identifiers=l:this.id&&(u.identifiers=[]);const c={indices:!0,nullsAsUndefineds:!1,booleansAsIntegers:!1,allowEmptyArrays:!1,noFilesWithArrayNotation:!1,dotsForObjectNotation:!1};let f=V.serialize(u,c);this.id&&l.length===0&&f.append("identifiers",JSON.stringify([])),this.id&&(s+="/"+this.id,f.append("_method","PUT"));const o=await this.axios.post(s,f);this.$emit("showToast",((e=o.data)==null?void 0:e.message)||"Data berhasil disimpan!","success"),this.dialogConfirmation=!1,this.typeSubmit==="createNew"?this.resetForm():this.$router.go(-1)}catch(l){if(console.error("Submit error:",l),((a=l.response)==null?void 0:a.status)===422)this.formErrors=l.response.data.errors||{},this.$emit("showToast","Terdapat kesalahan validasi. Mohon periksa kembali data Anda.","error");else{const u=((t=(i=l.response)==null?void 0:i.data)==null?void 0:t.message)||l.message||"Terjadi kesalahan saat menyimpan data";this.$emit("showToast",u,"error")}this.dialogConfirmation=!1}finally{this.loading=!1}}}},L={class:"min-h-screen bg-gray-50 dark:bg-gray-900 py-6"},K={class:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8"},R={class:"mb-6"},G={class:"flex items-center space-x-3"},W={class:"text-2xl font-bold text-gray-900 dark:text-white"},J={class:"text-sm text-gray-500 dark:text-gray-400"},Y={key:0,class:"flex justify-center items-center py-12"},Q={key:1},X={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700"},Z={class:"p-6"},$={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ee={class:"lg:col-span-1"},re={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},te={class:"lg:col-span-1"},ie={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},se={class:"lg:col-span-1"},oe={class:"relative"},ae={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},ne={class:"lg:col-span-1"},de={class:"relative"},le={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},me={class:"lg:col-span-2"},ue={class:"space-y-2"},ge={key:0,class:"text-sm text-red-600 dark:text-red-400"},he={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700"},pe={class:"p-6 space-y-6"},fe={key:0,class:"mt-4"},ce={class:"space-y-2"},be={class:"text-sm text-gray-600 dark:text-gray-300 line-through"},ye=["onClick"],ke={key:0,class:"mt-4"},xe={class:"space-y-2"},ve={class:"text-sm text-gray-600 dark:text-gray-300 line-through"},we=["onClick"],_e={key:0,class:"mt-4"},Ie={class:"space-y-2"},Ce={class:"text-sm text-gray-600 dark:text-gray-300 line-through"},Ee=["onClick"],ze={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 mt-4"},Ve={class:"p-6"},Me={key:0,class:"space-y-4 mb-6"},je={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},Ue={class:"lg:col-span-1"},Ae={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},Be={class:"lg:col-span-1"},Se={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},Te={class:"flex justify-end mt-4"},Pe=["onClick"],Fe={class:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center hover:border-primary-400 dark:hover:border-primary-500 transition-colors"},Ne={class:"flex flex-col sm:flex-row gap-3 pt-6"},He=["disabled"],qe={key:0},Oe={key:1},De=["disabled"],Le={key:0,class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ke={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},Re={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"},Ge={key:1,class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24"},We={key:2},Je={key:3};function Ye(s,e,a,i,t,l){const u=I("confirmation-dialog"),c=I("autocomplete"),f=I("identifier-input");return n(),d("div",L,[r("div",K,[r("div",R,[r("div",G,[r("button",{onClick:e[0]||(e[0]=o=>s.$router.go(-1)),class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"},e[15]||(e[15]=[r("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),r("div",null,[r("h1",W,h(t.id?"Edit":"Tambah")+" Pengguna ",1),r("p",J,h(t.id?"Perbarui informasi pengguna":"Buat akun pengguna baru"),1)])])]),y(u,{isVisible:t.dialogConfirmation,title:"Konfirmasi Simpan",loading:t.loading,message:"Apakah Anda yakin ingin menyimpan perubahan ini?","confirm-text":"Ya, Simpan","cancel-text":"Batal",onOnClose:e[1]||(e[1]=o=>l.handleOnClose(o))},null,8,["isVisible","loading"]),t.loadingFetchUser?(n(),d("div",Y,e[16]||(e[16]=[r("div",{class:"text-center"},[r("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),r("p",{class:"text-gray-500 dark:text-gray-400 mt-4"},"Memuat data pengguna...")],-1)]))):(n(),d("div",Q,[r("form",{onSubmit:e[14]||(e[14]=j((...o)=>l.confirmSubmit&&l.confirmSubmit(...o),["prevent"])),class:"space-y-6"},[r("div",X,[e[25]||(e[25]=C('<div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700" data-v-f2d2b816><h2 class="text-lg font-semibold text-gray-900 dark:text-white flex items-center" data-v-f2d2b816><svg class="w-5 h-5 mr-2 text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-f2d2b816><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" data-v-f2d2b816></path></svg> Informasi Personal </h2><p class="text-sm text-gray-500 dark:text-gray-400 mt-1" data-v-f2d2b816> Data dasar pengguna dan kontak utama </p></div>',1)),r("div",Z,[r("div",$,[r("div",ee,[e[17]||(e[17]=r("label",{for:"name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[p(" Nama Lengkap "),r("span",{class:"text-red-500"},"*")],-1)),w(r("input",{type:"text",id:"name","onUpdate:modelValue":e[2]||(e[2]=o=>t.user.name=o),class:k(["block w-full px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors",t.formErrors.name?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-600":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"]),placeholder:"Masukkan nama lengkap",required:""},null,2),[[_,t.user.name]]),t.formErrors.name?(n(),d("p",re,h(t.formErrors.name[0]),1)):g("",!0)]),r("div",te,[e[18]||(e[18]=r("label",{for:"registration_number",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Nomor Induk ",-1)),w(r("input",{type:"text",id:"registration_number","onUpdate:modelValue":e[3]||(e[3]=o=>t.user.registration_number=o),class:k(["block w-full px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors",t.formErrors.registration_number?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-600":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"]),placeholder:"Contoh: EMP-2024-001"},null,2),[[_,t.user.registration_number]]),t.formErrors.registration_number?(n(),d("p",ie,h(t.formErrors.registration_number[0]),1)):g("",!0)]),r("div",se,[e[20]||(e[20]=r("label",{for:"email",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[p(" Email Utama "),r("span",{class:"text-red-500"},"*")],-1)),r("div",oe,[w(r("input",{type:"email",id:"email","onUpdate:modelValue":e[4]||(e[4]=o=>t.user.email=o),class:k(["block w-full pl-10 pr-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors",t.formErrors.email?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-600":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"]),placeholder:"contoh@domain.com",required:""},null,2),[[_,t.user.email]]),e[19]||(e[19]=r("svg",{class:"absolute left-3 top-2.5 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})],-1))]),t.formErrors.email?(n(),d("p",ae,h(t.formErrors.email[0]),1)):g("",!0)]),r("div",ne,[e[22]||(e[22]=r("label",{for:"phone",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[p(" No HP/WhatsApp Utama "),r("span",{class:"text-red-500"},"*")],-1)),r("div",de,[w(r("input",{type:"tel",id:"phone","onUpdate:modelValue":e[5]||(e[5]=o=>t.user.phone=o),class:k(["block w-full pl-10 pr-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors",t.formErrors.phone?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-600":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"]),placeholder:"08123456789",required:""},null,2),[[_,t.user.phone]]),e[21]||(e[21]=r("svg",{class:"absolute left-3 top-2.5 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})],-1))]),t.formErrors.phone?(n(),d("p",le,h(t.formErrors.phone[0]),1)):g("",!0)]),r("div",me,[e[24]||(e[24]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[p(" Organisasi "),r("span",{class:"text-red-500"},"*")],-1)),r("div",ue,[y(c,{items:t.organizations,placeholder:"Pilih organisasi...",multiple:"","label-key":"name",modelValue:t.user.organizations,"onUpdate:modelValue":e[6]||(e[6]=o=>t.user.organizations=o),class:k(t.formErrors.organizations?"border-red-300":"")},null,8,["items","modelValue","class"]),t.formErrors.organizations?(n(),d("p",ge,h(t.formErrors.organizations[0]),1)):g("",!0),e[23]||(e[23]=r("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Pilih satu atau lebih organisasi untuk pengguna ini ",-1))])])])])]),r("div",he,[e[32]||(e[32]=C('<div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700" data-v-f2d2b816><h2 class="text-lg font-semibold text-gray-900 dark:text-white flex items-center" data-v-f2d2b816><svg class="w-5 h-5 mr-2 text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-f2d2b816><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" data-v-f2d2b816></path></svg> Identifikasi Tambahan </h2><p class="text-sm text-gray-500 dark:text-gray-400 mt-1" data-v-f2d2b816> Email, nomor telepon, dan username alternatif (opsional) </p></div>',1)),r("div",pe,[r("div",null,[y(f,{modelValue:t.emailIdentifiers,"onUpdate:modelValue":e[7]||(e[7]=o=>t.emailIdentifiers=o),type:"email",label:"Email Tambahan",placeholder:"email@example.com","input-type":"email",error:t.formErrors.identifiers_email},null,8,["modelValue","error"]),t.deletedEmailIdentifiers.length>0?(n(),d("div",fe,[e[27]||(e[27]=r("p",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"}," Email yang dihapus (dapat dipulihkan): ",-1)),r("div",ce,[(n(!0),d(x,null,v(t.deletedEmailIdentifiers,o=>(n(),d("div",{key:o.id,class:"flex items-center justify-between p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg"},[r("span",be,h(o.value),1),r("button",{type:"button",onClick:m=>l.restoreIdentifier(o,"email"),class:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded-md text-green-700 bg-green-100 hover:bg-green-200 dark:bg-green-900 dark:text-green-300 dark:hover:bg-green-800 transition-colors"},e[26]||(e[26]=[r("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),p(" Pulihkan ")]),8,ye)]))),128))])])):g("",!0)]),r("div",null,[y(f,{modelValue:t.phoneIdentifiers,"onUpdate:modelValue":e[8]||(e[8]=o=>t.phoneIdentifiers=o),type:"phone",label:"No HP/WhatsApp Tambahan",placeholder:"08123456789","input-type":"tel",error:t.formErrors.identifiers_phone},null,8,["modelValue","error"]),t.deletedPhoneIdentifiers.length>0?(n(),d("div",ke,[e[29]||(e[29]=r("p",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"}," No HP yang dihapus (dapat dipulihkan): ",-1)),r("div",xe,[(n(!0),d(x,null,v(t.deletedPhoneIdentifiers,o=>(n(),d("div",{key:o.id,class:"flex items-center justify-between p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg"},[r("span",ve,h(o.value),1),r("button",{type:"button",onClick:m=>l.restoreIdentifier(o,"phone"),class:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded-md text-green-700 bg-green-100 hover:bg-green-200 dark:bg-green-900 dark:text-green-300 dark:hover:bg-green-800 transition-colors"},e[28]||(e[28]=[r("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),p(" Pulihkan ")]),8,we)]))),128))])])):g("",!0)]),r("div",null,[y(f,{modelValue:t.usernameIdentifiers,"onUpdate:modelValue":e[9]||(e[9]=o=>t.usernameIdentifiers=o),type:"username",label:"Username",placeholder:"username","input-type":"text",error:t.formErrors.identifiers_username},null,8,["modelValue","error"]),t.deletedUsernameIdentifiers.length>0?(n(),d("div",_e,[e[31]||(e[31]=r("p",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"}," Username yang dihapus (dapat dipulihkan): ",-1)),r("div",Ie,[(n(!0),d(x,null,v(t.deletedUsernameIdentifiers,o=>(n(),d("div",{key:o.id,class:"flex items-center justify-between p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg"},[r("span",Ce,h(o.value),1),r("button",{type:"button",onClick:m=>l.restoreIdentifier(o,"username"),class:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded-md text-green-700 bg-green-100 hover:bg-green-200 dark:bg-green-900 dark:text-green-300 dark:hover:bg-green-800 transition-colors"},e[30]||(e[30]=[r("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),p(" Pulihkan ")]),8,Ee)]))),128))])])):g("",!0)])])]),r("div",ze,[e[38]||(e[38]=C('<div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700" data-v-f2d2b816><h2 class="text-lg font-semibold text-gray-900 dark:text-white flex items-center" data-v-f2d2b816><svg class="w-5 h-5 mr-2 text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-f2d2b816><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" data-v-f2d2b816></path></svg> Otoritas &amp; Hak Akses </h2><p class="text-sm text-gray-500 dark:text-gray-400 mt-1" data-v-f2d2b816> Tentukan otoritas dan organisasi yang dapat diakses pengguna </p></div>',1)),r("div",Ve,[t.user.authorities&&t.user.authorities.length>0?(n(),d("div",Me,[(n(!0),d(x,null,v(t.user.authorities,(o,m)=>(n(),d("div",{key:m,class:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600"},[r("div",je,[r("div",Ue,[e[33]||(e[33]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[p(" Nama Otoritas "),r("span",{class:"text-red-500"},"*")],-1)),y(c,{items:t.authorities,placeholder:"Pilih otoritas...","label-key":"name",modelValue:o.authority,"onUpdate:modelValue":b=>o.authority=b,class:k(t.formErrors[`authorities.${m}.authority`]?"border-red-300":"")},null,8,["items","modelValue","onUpdate:modelValue","class"]),t.formErrors[`authorities.${m}.authority`]?(n(),d("p",Ae,h(t.formErrors[`authorities.${m}.authority`][0]),1)):g("",!0)]),r("div",Be,[e[34]||(e[34]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[p(" Organisasi untuk Otoritas Ini "),r("span",{class:"text-red-500"},"*")],-1)),y(c,{items:t.organizations,placeholder:"Pilih organisasi...",multiple:"","label-key":"name",modelValue:o.organizations,"onUpdate:modelValue":b=>o.organizations=b,class:k(t.formErrors[`authorities.${m}.organizations`]?"border-red-300":"")},null,8,["items","modelValue","onUpdate:modelValue","class"]),t.formErrors[`authorities.${m}.organizations`]?(n(),d("p",Se,h(t.formErrors[`authorities.${m}.organizations`][0]),1)):g("",!0)])]),r("div",Te,[r("button",{type:"button",onClick:b=>l.removeAuthority(m),class:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 dark:bg-red-900 dark:text-red-300 dark:hover:bg-red-800 transition-colors"},e[35]||(e[35]=[r("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),p(" Hapus Otoritas ")]),8,Pe)])]))),128))])):g("",!0),r("div",Fe,[r("button",{type:"button",onClick:e[10]||(e[10]=(...o)=>l.addAuthority&&l.addAuthority(...o)),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-primary-700 bg-primary-100 hover:bg-primary-200 dark:bg-primary-900 dark:text-primary-300 dark:hover:bg-primary-800 transition-colors"},e[36]||(e[36]=[r("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),p(" Tambah Otoritas ")])),e[37]||(e[37]=r("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-2"}," Klik untuk menambah otoritas baru untuk pengguna ini ",-1))])])]),r("div",Ne,[r("button",{type:"button",onClick:e[11]||(e[11]=o=>s.$router.go(-1)),class:"inline-flex justify-center items-center px-4 py-2 border border-gray-300 dark:border-gray-600 shadow-sm bg-white dark:bg-gray-700 text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 rounded-md transition-colors"},e[39]||(e[39]=[r("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 15l-3-3m0 0l3-3m-3 3h8M3 12a9 9 0 1118 0 9 9 0 01-18 0z"})],-1),p(" Kembali ")])),t.id?g("",!0):(n(),d("button",{key:0,type:"button",onClick:e[12]||(e[12]=o=>l.handleTypeSubmit("createNew")),disabled:t.loading,class:"inline-flex justify-center items-center px-4 py-2 border border-primary-600 dark:border-primary-500 shadow-sm bg-white dark:bg-gray-700 text-base font-medium text-primary-600 dark:text-primary-400 hover:bg-primary-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[e[40]||(e[40]=r("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)),t.loading?(n(),d("span",qe,"Menyimpan...")):(n(),d("span",Oe,"Simpan & Buat Baru"))],8,He)),r("button",{type:"button",onClick:e[13]||(e[13]=o=>l.handleTypeSubmit("create")),disabled:t.loading,class:"inline-flex justify-center items-center px-4 py-2 border border-transparent shadow-sm bg-primary-600 dark:bg-primary-600 text-base font-medium text-white hover:bg-primary-700 dark:hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[t.loading?g("",!0):(n(),d("svg",Le,[t.id?(n(),d("path",Re)):(n(),d("path",Ke))])),t.loading?(n(),d("svg",Ge,e[41]||(e[41]=[r("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),r("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):g("",!0),t.loading?(n(),d("span",We,"Menyimpan...")):(n(),d("span",Je,h(t.id?"Simpan Perubahan":"Simpan"),1))],8,De)])],32)]))])])}const Ze=z(D,[["render",Ye],["__scopeId","data-v-f2d2b816"]]);export{Ze as default};
