import{_ as m,G as h,o as d,a as i,b as e,f as k,j as g,v as p,F as b,m as f,t as n,k as x}from"./app-B6zZeFFz.js";const _={name:"PaymentIndex",data(){return{payments:[],loading:!1,filters:{search:"",date_from:"",date_to:""},pagination:{current_page:1,last_page:1,per_page:15,total:0,from:0,to:0}}},mounted(){this.load()},methods:{async load(){this.loading=!0;try{const a={page:this.pagination.current_page,per_page:this.pagination.per_page,...this.filters},{data:t}=await h.get("/payments",{params:a});this.payments=t.data,this.pagination={current_page:t.current_page,last_page:t.last_page,per_page:t.per_page,total:t.total,from:t.from,to:t.to}}catch(a){console.error("Failed to load payments:",a),this.$emit("showToast","Failed to load payments","error")}finally{this.loading=!1}},changePage(a){a>=1&&a<=this.pagination.last_page&&(this.pagination.current_page=a,this.load())},formatDate(a){return new Date(a).toLocaleDateString("id-ID")},formatCurrency(a){return"Rp "+Number(a).toLocaleString("id-ID")},formatMethod(a){return{cash:"Cash",bank_transfer:"Bank Transfer",check:"Check",giro:"Giro",credit_card:"Credit Card",other:"Other"}[a]||a},async confirmDelete(a){var t,l;if(confirm("Are you sure you want to delete this payment?"))try{await h.delete(`/payments/${a.id}`),this.$emit("showToast","Payment deleted successfully","success"),this.load()}catch(c){const s=((l=(t=c.response)==null?void 0:t.data)==null?void 0:l.message)||"Failed to delete payment";this.$emit("showToast",s,"error")}}}},v={class:"p-6"},w={class:"flex justify-between mb-6"},C={class:"flex gap-4 mb-4"},D={class:"bg-white dark:bg-gray-800 rounded shadow overflow-x-auto"},P={class:"w-full"},V={key:0,class:"border-t dark:border-gray-700"},I={key:1,class:"border-t dark:border-gray-700"},N={class:"p-3 dark:text-gray-300"},T={class:"p-3 dark:text-gray-300"},j={class:"p-3 dark:text-gray-300"},B={class:"p-3 text-right dark:text-gray-300"},F={class:"p-3 dark:text-gray-300"},M={class:"p-3"},S={class:"flex gap-2 justify-center"},A=["onClick"],L=["onClick"],U=["onClick"],E={key:0,class:"mt-4 flex justify-between items-center dark:text-gray-300"},G={class:"flex gap-2"},R=["disabled"],H=["disabled"];function O(a,t,l,c,s,o){return d(),i("div",v,[e("div",w,[t[10]||(t[10]=e("h1",{class:"text-2xl font-bold dark:text-white"},"Payments",-1)),e("button",{onClick:t[0]||(t[0]=r=>a.$router.push("/app/invoices/payments/create")),class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center gap-2"},t[9]||(t[9]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),k(" Record Payment ")]))]),e("div",C,[g(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>s.filters.search=r),onInput:t[2]||(t[2]=(...r)=>o.load&&o.load(...r)),placeholder:"Search by payment number, invoice...",class:"border dark:border-gray-600 px-3 py-2 rounded flex-1 dark:bg-gray-700 dark:text-white"},null,544),[[p,s.filters.search]]),g(e("input",{"onUpdate:modelValue":t[3]||(t[3]=r=>s.filters.date_from=r),type:"date",onChange:t[4]||(t[4]=(...r)=>o.load&&o.load(...r)),class:"border dark:border-gray-600 px-3 py-2 rounded dark:bg-gray-700 dark:text-white"},null,544),[[p,s.filters.date_from]]),g(e("input",{"onUpdate:modelValue":t[5]||(t[5]=r=>s.filters.date_to=r),type:"date",onChange:t[6]||(t[6]=(...r)=>o.load&&o.load(...r)),class:"border dark:border-gray-600 px-3 py-2 rounded dark:bg-gray-700 dark:text-white"},null,544),[[p,s.filters.date_to]])]),e("div",D,[e("table",P,[t[13]||(t[13]=e("thead",{class:"bg-gray-100 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"p-3 text-left dark:text-gray-200"},"Payment #"),e("th",{class:"p-3 text-left dark:text-gray-200"},"Date"),e("th",{class:"p-3 text-left dark:text-gray-200"},"Invoice #"),e("th",{class:"p-3 text-right dark:text-gray-200"},"Amount"),e("th",{class:"p-3 text-left dark:text-gray-200"},"Method"),e("th",{class:"p-3 text-center dark:text-gray-200"},"Actions")])],-1)),e("tbody",null,[s.loading?(d(),i("tr",V,t[11]||(t[11]=[e("td",{colspan:"6",class:"p-4 text-center dark:text-gray-300"},"Loading...",-1)]))):s.payments.length?(d(!0),i(b,{key:2},f(s.payments,r=>{var u;return d(),i("tr",{key:r.id,class:"border-t dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"},[e("td",N,n(r.payment_number),1),e("td",T,n(o.formatDate(r.payment_date)),1),e("td",j,n((u=r.invoice)==null?void 0:u.invoice_number),1),e("td",B,n(o.formatCurrency(r.amount)),1),e("td",F,n(o.formatMethod(r.payment_method)),1),e("td",M,[e("div",S,[e("button",{onClick:y=>a.$router.push(`/app/invoices/payments/${r.id}`),class:"text-blue-600 dark:text-blue-400",title:"View"}," ðŸ‘ ",8,A),e("button",{onClick:y=>a.$router.push(`/app/invoices/payments/${r.id}/edit`),class:"text-green-600 dark:text-green-400",title:"Edit"}," âœï¸ ",8,L),e("button",{onClick:y=>o.confirmDelete(r),class:"text-red-600 dark:text-red-400",title:"Delete"}," ðŸ—‘ ",8,U)])])])}),128)):(d(),i("tr",I,t[12]||(t[12]=[e("td",{colspan:"6",class:"p-4 text-center text-gray-500 dark:text-gray-400"},"No payments found",-1)])))])])]),s.pagination.total>0?(d(),i("div",E,[e("div",null," Showing "+n(s.pagination.from)+" to "+n(s.pagination.to)+" of "+n(s.pagination.total)+" entries ",1),e("div",G,[e("button",{onClick:t[7]||(t[7]=r=>o.changePage(s.pagination.current_page-1)),disabled:s.pagination.current_page===1,class:"px-3 py-1 border dark:border-gray-600 rounded disabled:opacity-50 dark:bg-gray-700"}," Previous ",8,R),e("button",{onClick:t[8]||(t[8]=r=>o.changePage(s.pagination.current_page+1)),disabled:s.pagination.current_page===s.pagination.last_page,class:"px-3 py-1 border dark:border-gray-600 rounded disabled:opacity-50 dark:bg-gray-700"}," Next ",8,H)])])):x("",!0)])}const z=m(_,[["render",O]]);export{z as default};
