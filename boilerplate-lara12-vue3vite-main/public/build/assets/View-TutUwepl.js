import{y as D,z as I,r as v,B as C,o as i,a as d,b as t,t as r,n as A,f as y,k as n,F as T,m as j,G as p}from"./app-Bp1oJ4sm.js";const P={key:0,class:"p-6"},M={class:"flex flex-col md:flex-row justify-between items-center gap-4 mb-6"},B={class:"flex items-center gap-3"},N={class:"text-2xl font-bold text-gray-900 dark:text-white"},L={class:"flex gap-2"},R=["disabled"],U=["disabled"],$={key:0,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},E={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},F={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},O={class:"lg:col-span-2 space-y-6"},V={class:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700"},z={class:"flex justify-between items-start mb-10 pb-6 border-b dark:border-gray-700"},H={class:"text-right"},Q={class:"text-3xl font-black text-gray-900 dark:text-white uppercase tracking-tighter"},q={class:"text-lg font-mono text-gray-600 dark:text-gray-400 mt-1"},J={class:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-10"},S={class:"text-xl font-bold text-gray-900 dark:text-white"},G={class:"text-gray-500 text-sm mt-1 whitespace-pre-wrap"},K={class:"grid grid-cols-2 gap-y-4 text-sm"},W={class:"font-semibold text-gray-900 dark:text-white"},Y={class:"font-semibold text-gray-900 dark:text-white"},X={class:"font-semibold text-gray-900 dark:text-white"},Z={class:"font-semibold text-gray-900 dark:text-white"},tt={class:"overflow-x-auto mb-8"},et={class:"w-full text-left"},st={class:"divide-y dark:divide-gray-700"},at={class:"py-4"},ot={class:"font-bold text-gray-900 dark:text-white"},rt={class:"text-xs text-gray-500"},lt={class:"py-4 text-center text-gray-900 dark:text-white"},it={class:"py-4 text-right text-gray-900 dark:text-white"},dt={class:"py-4 text-right font-bold text-gray-900 dark:text-white"},nt={class:"flex flex-col md:flex-row gap-8"},ut={class:"flex-1"},ct={class:"bg-gray-50 dark:bg-gray-900/50 p-4 rounded-lg"},xt={class:"text-sm font-semibold text-gray-700 dark:text-gray-300 italic"},gt={key:0,class:"mt-4"},vt={class:"text-sm text-gray-600 dark:text-gray-400"},yt={class:"w-full md:w-64 space-y-3"},pt={class:"flex justify-between text-sm"},bt={class:"font-semibold text-gray-900 dark:text-white"},mt={key:0,class:"flex justify-between text-sm"},ft={class:"font-semibold text-red-600"},wt={key:1,class:"flex justify-between text-sm"},ht={class:"text-gray-500"},kt={class:"font-semibold text-gray-900 dark:text-white"},_t={key:2,class:"flex justify-between text-sm"},Dt={class:"font-semibold text-gray-900 dark:text-white"},It={class:"flex justify-between text-xl border-t-2 border-gray-900 dark:border-gray-600 pt-3"},Ct={class:"font-black text-primary-600 dark:text-primary-500"},At={class:"space-y-6"},Tt={class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700"},jt={class:"space-y-4 text-sm"},Pt={key:0},Mt={class:"text-gray-700 dark:text-gray-300"},Bt={key:1},Nt={class:"text-gray-700 dark:text-gray-300"},Lt={key:2},Rt={class:"text-gray-700 dark:text-gray-300"},Ut={key:3},$t={class:"text-gray-700 dark:text-gray-300"},Et={key:0,class:"bg-yellow-50 dark:bg-yellow-900/20 p-6 rounded-xl border border-yellow-100 dark:border-yellow-700/50"},Ft={class:"text-sm text-yellow-700 dark:text-yellow-300 whitespace-pre-wrap"},zt={__name:"View",setup(Ot){const m=D();I();const s=v(null),c=v(!1),g=v(!1),u=l=>new Intl.NumberFormat("id-ID",{minimumFractionDigits:0}).format(l),b=async()=>{try{const l=await p.get(`invoices/${m.params.id}`);s.value=l}catch(l){console.error("Failed to fetch invoice:",l)}};C(b);const f=l=>l?new Date(l).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}):"-",x=l=>l?new Date(l).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",w=l=>({DRAFT:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",QUOTED:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",INVOICED:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",PARTIAL_PAID:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300",PAID:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900 dark:text-emerald-300",VOID:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"})[l]||"bg-gray-100 text-gray-800",h=async()=>{if(confirm("Ubah penawaran ini menjadi invoice?")){g.value=!0;try{await p.post(`invoices/${s.value.id}/mark-as-invoiced`),await b(),alert("âœ… Penawaran berhasil dikonversi menjadi Invoice!")}catch(l){console.error("Conversion failed",l),alert("Gagal mengkonversi penawaran.")}finally{g.value=!1}}},k=async l=>{try{c.value=!0;const e=await p.get(`invoices/${l}/pdf`,{responseType:"blob",headers:{Accept:"application/pdf"}}),o=window.URL.createObjectURL(new Blob([e])),a=document.createElement("a");a.href=o,a.target="_blank",a.download=`${s.value.status}-${s.value.invoice_number}.pdf`,document.body.appendChild(a),a.click(),a.remove(),window.URL.revokeObjectURL(o)}catch(e){console.error("PDF download failed",e),alert("Gagal membuat PDF.")}finally{c.value=!1}};function _(l){const e=["","satu","dua","tiga","empat","lima","enam","tujuh","delapan","sembilan","sepuluh","sebelas"];function o(a){return a=Math.floor(a),a<12?e[a]:a<20?o(a-10)+" belas":a<100?o(Math.floor(a/10))+" puluh"+(a%10?" "+o(a%10):""):a<200?"seratus"+(a-100?" "+o(a-100):""):a<1e3?o(Math.floor(a/100))+" ratus"+(a%100?" "+o(a%100):""):a<2e3?"seribu"+(a-1e3?" "+o(a-1e3):""):a<1e6?o(Math.floor(a/1e3))+" ribu"+(a%1e3?" "+o(a%1e3):""):a<1e9?o(Math.floor(a/1e6))+" juta"+(a%1e6?" "+o(a%1e6):""):o(Math.floor(a/1e9))+" milyar"+(a%1e9?" "+o(a%1e9):"")}return!l&&l!==0?"":l===0?"nol":o(l)+" rupiah"}return(l,e)=>s.value?(i(),d("div",P,[t("div",M,[t("div",B,[t("button",{onClick:e[0]||(e[0]=o=>l.$router.back()),class:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors"},e[3]||(e[3]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])),t("h2",N,"Detail "+r(s.value.status==="QUOTED"?"Penawaran":"Invoice"),1),t("span",{class:A([w(s.value.status),"px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider"])},r(s.value.status),3)]),t("div",L,[s.value.status==="QUOTED"?(i(),d("button",{key:0,onClick:h,disabled:g.value,class:"flex items-center gap-2 bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg font-semibold transition-colors shadow-sm"},e[4]||(e[4]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),y(" Jadikan Invoice ")]),8,R)):n("",!0),t("button",{onClick:e[1]||(e[1]=o=>k(s.value.id)),disabled:c.value,class:"flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-semibold transition-colors shadow-sm disabled:opacity-50"},[c.value?(i(),d("svg",$,e[5]||(e[5]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(i(),d("svg",E,e[6]||(e[6]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)]))),e[7]||(e[7]=y(" Cetak PDF "))],8,U),t("button",{onClick:e[2]||(e[2]=o=>l.$router.push(`/app/invoices/invoices/${s.value.id}/edit`)),class:"flex items-center gap-2 bg-gray-800 hover:bg-gray-900 text-white px-4 py-2 rounded-lg font-semibold transition-colors shadow-sm"},e[8]||(e[8]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),y(" Edit ")]))])]),t("div",F,[t("div",O,[t("div",V,[t("div",z,[e[9]||(e[9]=t("div",null,[t("h2",{class:"text-2xl font-bold text-primary-600 dark:text-primary-500"},"PT. INDONESIA JAYA"),t("div",{class:"text-gray-500 text-sm mt-1"},"Jl. Contoh Alamat No. 123"),t("div",{class:"text-gray-500 text-sm"},"Jakarta, Indonesia")],-1)),t("div",H,[t("h1",Q,r(s.value.status==="QUOTED"?"PENAWARAN":"FAKTUR"),1),t("div",q,r(s.value.invoice_number),1)])]),t("div",J,[t("div",null,[e[10]||(e[10]=t("div",{class:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-2"},"Ditagihkan Ke:",-1)),t("div",S,r(s.value.customer_name),1),t("div",G,r(s.value.customer_address),1)]),t("div",K,[t("div",null,[e[11]||(e[11]=t("div",{class:"text-xs font-bold text-gray-400 uppercase tracking-widest"},"Tanggal",-1)),t("div",W,r(f(s.value.invoice_date)),1)]),t("div",null,[e[12]||(e[12]=t("div",{class:"text-xs font-bold text-gray-400 uppercase tracking-widest"},"Tempo",-1)),t("div",Y,r(s.value.payment_terms||"-"),1)]),t("div",null,[e[13]||(e[13]=t("div",{class:"text-xs font-bold text-gray-400 uppercase tracking-widest"},"PO No.",-1)),t("div",X,r(s.value.po_number||"-"),1)]),t("div",null,[e[14]||(e[14]=t("div",{class:"text-xs font-bold text-gray-400 uppercase tracking-widest"},"Mata Uang",-1)),t("div",Z,r(s.value.currency_name||"IDR"),1)])])]),t("div",tt,[t("table",et,[e[15]||(e[15]=t("thead",{class:"border-b-2 border-gray-900 dark:border-gray-600"},[t("tr",null,[t("th",{class:"py-4 font-bold text-gray-900 dark:text-white"},"Deskripsi Barang"),t("th",{class:"py-4 font-bold text-gray-900 dark:text-white text-center"},"Kts"),t("th",{class:"py-4 font-bold text-gray-900 dark:text-white text-right"},"Harga"),t("th",{class:"py-4 font-bold text-gray-900 dark:text-white text-right"},"Total")])],-1)),t("tbody",st,[(i(!0),d(T,null,j(s.value.items,(o,a)=>(i(),d("tr",{key:a},[t("td",at,[t("div",ot,r(o.item_name),1),t("div",rt,r(o.item_code),1)]),t("td",lt,r(o.quantity),1),t("td",it,r(u(o.unit_price)),1),t("td",dt,r(u((o.quantity||0)*(o.unit_price||0)-(o.discount||0))),1)]))),128))])])]),t("div",nt,[t("div",ut,[t("div",ct,[e[16]||(e[16]=t("div",{class:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-2"},"Terbilang:",-1)),t("div",xt,'"'+r(s.value.terbilang||_(Math.round(s.value.total||0)))+'"',1)]),s.value.notes?(i(),d("div",gt,[e[17]||(e[17]=t("div",{class:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-1"},"Catatan:",-1)),t("div",vt,r(s.value.notes),1)])):n("",!0)]),t("div",yt,[t("div",pt,[e[18]||(e[18]=t("span",{class:"text-gray-500"},"Subtotal",-1)),t("span",bt,r(u(s.value.subtotal)),1)]),s.value.discount?(i(),d("div",mt,[e[19]||(e[19]=t("span",{class:"text-gray-500"},"Diskon",-1)),t("span",ft,"-"+r(u(s.value.discount)),1)])):n("",!0),s.value.ppn_amount?(i(),d("div",wt,[t("span",ht,"PPN ("+r(s.value.ppn_percent)+"%)",1),t("span",kt,r(u(s.value.ppn_amount)),1)])):n("",!0),s.value.other_charges?(i(),d("div",_t,[e[20]||(e[20]=t("span",{class:"text-gray-500"},"Biaya Lain",-1)),t("span",Dt,r(u(s.value.other_charges)),1)])):n("",!0),t("div",It,[e[21]||(e[21]=t("span",{class:"font-black text-gray-900 dark:text-white uppercase"},"Total",-1)),t("span",Ct,r(u(s.value.total)),1)])])])])]),t("div",At,[t("div",Tt,[e[26]||(e[26]=t("h3",{class:"font-bold text-gray-900 dark:text-white mb-4"},"Informasi Tambahan",-1)),t("div",jt,[s.value.created_at?(i(),d("div",Pt,[e[22]||(e[22]=t("div",{class:"text-xs font-bold text-gray-400 uppercase"},"Dibuat Pada",-1)),t("div",Mt,r(x(s.value.created_at)),1)])):n("",!0),s.value.quoted_at?(i(),d("div",Bt,[e[23]||(e[23]=t("div",{class:"text-xs font-bold text-blue-400 uppercase"},"Quoted At",-1)),t("div",Nt,r(x(s.value.quoted_at)),1)])):n("",!0),s.value.invoiced_at?(i(),d("div",Lt,[e[24]||(e[24]=t("div",{class:"text-xs font-bold text-emerald-400 uppercase"},"Invoiced At",-1)),t("div",Rt,r(x(s.value.invoiced_at)),1)])):n("",!0),s.value.paid_at?(i(),d("div",Ut,[e[25]||(e[25]=t("div",{class:"text-xs font-bold text-purple-400 uppercase"},"Lunas Pada",-1)),t("div",$t,r(x(s.value.paid_at)),1)])):n("",!0)])]),s.value.internal_notes?(i(),d("div",Et,[e[27]||(e[27]=t("h3",{class:"font-bold text-yellow-800 dark:text-yellow-400 mb-2"},"Catatan Internal",-1)),t("p",Ft,r(s.value.internal_notes),1)])):n("",!0)])])])):n("",!0)}};export{zt as default};
