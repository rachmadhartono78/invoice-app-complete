import{y as m,r as p,B as h,G as _,o as i,a as d,b as t,t as r,F as f,m as x,k as v,n as y}from"./app-B6zZeFFz.js";const k={key:0,class:"p-6"},w={class:"flex justify-between items-start mb-6"},D={class:"border p-4 text-sm"},P={class:"grid grid-cols-2 gap-2 mt-2 text-xs"},M={class:"bg-white p-6 rounded shadow mb-6"},$={class:"mb-4"},j={class:"font-bold"},B={class:"text-sm"},F={class:"w-full border-collapse mb-4"},C={class:"border p-2"},L={class:"border p-2"},N={class:"border p-2 text-center"},R={class:"border p-2 text-right"},T={class:"border p-2 text-right"},O={class:"border p-2 text-right"},U={class:"mb-4"},A={class:"border p-2 mt-1"},E={class:"flex gap-6 justify-end"},S={class:"w-1/3"},I={class:"w-full"},K={class:"text-right"},V={key:0},q={class:"text-right"},G={key:1},H={class:"text-right"},z={key:2},W={class:"text-right"},Y={class:"font-bold border-t-2"},J={class:"text-right"},Q={class:"grid grid-cols-2 gap-8 mt-8"},X={class:"text-center"},Z={class:"mt-12"},tt={class:"text-center"},et={class:"mt-12"},st={class:"flex gap-2"},ot=["disabled"],at={__name:"View",setup(lt){const c=m(),l=p(null),u=p(!1),n=a=>new Intl.NumberFormat("id").format(a);h(async()=>{const a=await _.get(`invoices/${c.params.id}`);l.value=a});const b=async a=>{try{u.value=!0;const e=await _.get(`invoices/${a}/pdf`,{responseType:"blob",headers:{Accept:"application/pdf"}}),o=window.URL.createObjectURL(e),s=document.createElement("a");s.href=o,s.target="_blank",s.download=`invoice-${a}.pdf`,document.body.appendChild(s),s.click(),s.remove(),window.URL.revokeObjectURL(o)}catch(e){console.error("PDF download failed",e),alert("Failed to generate PDF.")}finally{u.value=!1}};function g(a){const e=["","satu","dua","tiga","empat","lima","enam","tujuh","delapan","sembilan","sepuluh","sebelas"];function o(s){return s=Math.floor(s),s<12?e[s]:s<20?o(s-10)+" belas":s<100?o(Math.floor(s/10))+" puluh"+(s%10?" "+o(s%10):""):s<200?"seratus"+(s-100?" "+o(s-100):""):s<1e3?o(Math.floor(s/100))+" ratus"+(s%100?" "+o(s%100):""):s<2e3?"seribu"+(s-1e3?" "+o(s-1e3):""):s<1e6?o(Math.floor(s/1e3))+" ribu"+(s%1e3?" "+o(s%1e3):""):s<1e9?o(Math.floor(s/1e6))+" juta"+(s%1e6?" "+o(s%1e6):""):o(Math.floor(s/1e9))+" milyar"+(s%1e9?" "+o(s%1e9):"")}return!a&&a!==0?"":a===0?"nol":o(a)+" rupiah"}return(a,e)=>l.value?(i(),d("div",k,[t("div",w,[e[10]||(e[10]=t("div",null,[t("h2",{class:"text-xl font-bold"},"Your Company"),t("div",{class:"text-sm"},"Address line 1"),t("div",{class:"text-sm"},"Address line 2")],-1)),t("div",D,[e[9]||(e[9]=t("div",null,[t("strong",null,"Faktur Penjualan")],-1)),t("div",P,[t("div",null,[e[3]||(e[3]=t("strong",null,"Tanggal",-1)),t("div",null,r(new Date(l.value.invoice_date).toLocaleDateString("id")),1)]),t("div",null,[e[4]||(e[4]=t("strong",null,"Nomor",-1)),t("div",null,r(l.value.invoice_number),1)]),t("div",null,[e[5]||(e[5]=t("strong",null,"Syarat Pembayaran",-1)),t("div",null,r(l.value.payment_terms),1)]),t("div",null,[e[6]||(e[6]=t("strong",null,"PO No",-1)),t("div",null,r(l.value.po_number),1)]),t("div",null,[e[7]||(e[7]=t("strong",null,"Ekspedisi",-1)),t("div",null,r(l.value.expedition),1)]),t("div",null,[e[8]||(e[8]=t("strong",null,"Mata Uang",-1)),t("div",null,r(l.value.currency_name||"Indonesian Rupiah"),1)])])])]),t("div",M,[t("div",$,[e[11]||(e[11]=t("div",{class:"text-sm"},[t("strong",null,"Kepada:")],-1)),t("div",j,r(l.value.customer_name),1),t("div",B,r(l.value.customer_address),1)]),t("table",F,[e[12]||(e[12]=t("thead",null,[t("tr",null,[t("th",{class:"border p-2 text-left"},"Kode Barang"),t("th",{class:"border p-2 text-left"},"Nama Barang"),t("th",{class:"border p-2 text-center"},"Kts."),t("th",{class:"border p-2 text-right"},"@Harga"),t("th",{class:"border p-2 text-right"},"Diskon"),t("th",{class:"border p-2 text-right"},"Total Harga")])],-1)),t("tbody",null,[(i(!0),d(f,null,x(l.value.items,(o,s)=>(i(),d("tr",{key:s},[t("td",C,r(o.item_code),1),t("td",L,r(o.item_name),1),t("td",N,r(o.quantity),1),t("td",R,r(n(o.unit_price)),1),t("td",T,r(n(o.discount)),1),t("td",O,r(n((o.quantity||0)*(o.unit_price||0)-(o.discount||0))),1)]))),128))])]),t("div",U,[e[13]||(e[13]=t("strong",null,"Terbilang :",-1)),t("div",A,r(l.value.terbilang||g(Math.round(l.value.total||0))),1)]),t("div",E,[t("div",S,[t("table",I,[t("tr",null,[e[14]||(e[14]=t("td",null,"Sub Total",-1)),t("td",K,r(n(l.value.subtotal)),1)]),l.value.discount?(i(),d("tr",V,[e[15]||(e[15]=t("td",null,"Diskon",-1)),t("td",q,r(n(l.value.discount)),1)])):v("",!0),l.value.ppn_amount?(i(),d("tr",G,[t("td",null,"PPN ("+r(l.value.ppn_percent)+"%)",1),t("td",H,r(n(l.value.ppn_amount)),1)])):v("",!0),l.value.other_charges?(i(),d("tr",z,[e[16]||(e[16]=t("td",null,"Biaya Lain-lain",-1)),t("td",W,r(n(l.value.other_charges)),1)])):v("",!0),t("tr",Y,[e[17]||(e[17]=t("td",null,"Total",-1)),t("td",J,r(n(l.value.total)),1)])])])]),t("div",Q,[t("div",X,[e[18]||(e[18]=t("div",null,"Disiapkan Oleh",-1)),t("div",Z,r(l.value.prepared_by||"__________"),1)]),t("div",tt,[e[19]||(e[19]=t("div",null,"Disetujui Oleh",-1)),t("div",et,r(l.value.approved_by||"__________"),1)])])]),t("div",st,[t("button",{onClick:e[0]||(e[0]=o=>b(l.value.id)),disabled:u.value,class:y([u.value?"bg-gray-400 cursor-wait opacity-75":"bg-red-600 hover:bg-red-700","text-white px-4 py-2 rounded"])},r(u.value?"â³ Generating...":"ðŸ“„ PDF"),11,ot),t("button",{onClick:e[1]||(e[1]=o=>a.$router.push(`/app/invoices/invoices/${l.value.id}/edit`)),class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded"},"Edit"),t("button",{onClick:e[2]||(e[2]=o=>a.$router.push("/app/invoices/invoices")),class:"border px-4 py-2 rounded hover:bg-gray-50"},"Back")])])):v("",!0)}};export{at as default};
