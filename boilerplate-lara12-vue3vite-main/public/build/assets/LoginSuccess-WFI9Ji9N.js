import{_ as d,u,c as n,a as t,k as l,t as h,h as k,o as r}from"./app-C0aBAvKS.js";const m={name:"LoginSuccess",data(){return{token:null,countdown:3,countdownInterval:null}},created(){const s=this.$route.query.token;s&&(this.token=s,this.fetchUser(s))},beforeDestroy(){this.countdownInterval&&clearInterval(this.countdownInterval)},methods:{async fetchUser(s){var e;try{await fetch("/sanctum/csrf-cookie",{credentials:"include"});const a=(await this.axios.get("/me",{headers:{Authorization:`Bearer ${s}`}})).user;console.log(a);const o=((e=a.authorities)==null?void 0:e.map(c=>c.pivot.authority_id))||[];a.authority_ids=o,u().setUser(a),this.startCountdown()}catch(i){console.error("Gagal ambil data user:",i),this.$router.push({name:"auth"})}},startCountdown(){this.countdownInterval=setInterval(()=>{this.countdown>1?this.countdown--:(clearInterval(this.countdownInterval),this.$router.push({name:"home"}))},1e3)}}},x={class:"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-100 to-blue-300"},f={class:"w-full max-w-md p-8 bg-white rounded-xl shadow-lg border border-blue-200"},p={class:"flex flex-col items-center space-y-4"},w={key:0,class:"w-16 h-16 text-green-500 mb-2",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},v={key:1,class:"text-2xl font-bold text-green-600"},y={key:2,class:"text-gray-700 text-center"},_={key:3,class:"flex flex-col items-center mt-2 space-y-1"},b={class:"flex items-center space-x-2"},g={class:"font-semibold text-blue-600 text-lg"},I={class:"text-xs text-gray-500"},B={key:4,class:"flex flex-col items-center"};function C(s,e,i,a,o,c){return r(),n("div",x,[t("div",f,[t("div",p,[o.token?(r(),n("svg",w,e[1]||(e[1]=[t("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2",fill:"none"},null,-1),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12l2 2l4-4"},null,-1)]))):l("",!0),o.token?(r(),n("h2",v,"Login Berhasil!")):l("",!0),o.token?(r(),n("p",y," Anda berhasil masuk. Anda akan diarahkan ke beranda. ")):l("",!0),o.token?(r(),n("div",_,[t("div",b,[e[2]||(e[2]=t("span",{class:"text-sm text-gray-500"},"Mengalihkan ke beranda dalam",-1)),t("span",g,h(o.countdown),1),e[3]||(e[3]=t("span",{class:"text-sm text-gray-500"},"detik...",-1))]),t("small",I,[e[4]||(e[4]=k(" Tidak diarahkan secara otomatis? ")),t("span",{onClick:e[0]||(e[0]=$=>s.$router.push({name:"home"})),class:"text-blue-600 cursor-pointer hover:underline font-medium"}," Klik di sini untuk ke Beranda ")])])):(r(),n("div",B,e[5]||(e[5]=[t("svg",{class:"w-12 h-12 text-red-400 mb-2",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[t("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2",fill:"none"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 9l-6 6m0-6l6 6"})],-1),t("p",{class:"text-red-500 font-semibold"},"Token tidak ditemukan di URL.",-1)])))])])])}const L=d(m,[["render",C],["__scopeId","data-v-bd507da5"]]);export{L as default};
