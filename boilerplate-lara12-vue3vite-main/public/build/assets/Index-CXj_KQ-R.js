import{_ as y,G as u,o as i,c as d,a as e,h,e as x,j as k,K as _,F as m,l as b,t as o,k as g,s as f}from"./app-Kf_TfGnx.js";const v={name:"CustomerIndex",data(){return{customers:[],loading:!1,filters:{search:"",is_active:""},pagination:{current_page:1,last_page:1,per_page:15,total:0,from:0,to:0}}},mounted(){this.load()},methods:{async load(){this.loading=!0;try{const s={page:this.pagination.current_page,per_page:this.pagination.per_page,...this.filters},t=await u.get("/customers",{params:s});this.customers=(t==null?void 0:t.data)||[],this.pagination={current_page:(t==null?void 0:t.current_page)||1,last_page:(t==null?void 0:t.last_page)||1,per_page:(t==null?void 0:t.per_page)||15,total:(t==null?void 0:t.total)||0,from:(t==null?void 0:t.from)||0,to:(t==null?void 0:t.to)||0}}catch(s){console.error("Failed to load customers:",s),this.customers=[],this.$emit("showToast","Failed to load customers","error")}finally{this.loading=!1}},changePage(s){s>=1&&s<=this.pagination.last_page&&(this.pagination.current_page=s,this.load())},formatPaymentTerms(s){return{cash:"Cash",net_7:"Net 7",net_14:"Net 14",net_30:"Net 30",net_45:"Net 45",net_60:"Net 60"}[s]||s},async confirmDelete(s){var t,l;if(confirm(`Are you sure you want to delete customer "${s.name}"?`))try{await u.delete(`/customers/${s.id}`),this.$emit("showToast","Customer deleted successfully","success"),this.load()}catch(c){const r=((l=(t=c.response)==null?void 0:t.data)==null?void 0:l.message)||"Failed to delete customer";this.$emit("showToast",r,"error")}}}},w={class:"p-6"},C={class:"flex justify-between mb-6"},N={class:"flex gap-4 mb-4"},T={class:"bg-white dark:bg-gray-800 rounded shadow overflow-x-auto"},P={class:"w-full"},A={key:0,class:"border-t dark:border-gray-700"},S={key:1,class:"border-t dark:border-gray-700"},V={class:"p-3 dark:text-gray-300"},j={class:"p-3 dark:text-gray-300"},D={class:"font-medium"},F={class:"text-sm text-gray-500 dark:text-gray-400"},I={class:"p-3 dark:text-gray-300"},B={key:0},M={key:1,class:"text-sm text-gray-500 dark:text-gray-400"},E={class:"p-3 dark:text-gray-300"},L={class:"p-3 text-center"},U={class:"p-3"},z={class:"flex gap-2 justify-center"},G=["onClick"],H=["onClick"],K=["onClick"],q={key:0,class:"mt-4 flex justify-between items-center dark:text-gray-300"},J={class:"flex gap-2"},O=["disabled"],Q=["disabled"];function R(s,t,l,c,r,n){return i(),d("div",w,[e("div",C,[t[8]||(t[8]=e("h1",{class:"text-2xl font-bold dark:text-white"},"Customers",-1)),e("button",{onClick:t[0]||(t[0]=a=>s.$router.push("/app/invoices/customers/create")),class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center gap-2"},t[7]||(t[7]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),h(" New Customer ")]))]),e("div",N,[x(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>r.filters.search=a),onInput:t[2]||(t[2]=(...a)=>n.load&&n.load(...a)),placeholder:"Search by name, code, phone, email...",class:"border dark:border-gray-600 px-3 py-2 rounded flex-1 dark:bg-gray-700 dark:text-white"},null,544),[[k,r.filters.search]]),x(e("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>r.filters.is_active=a),onChange:t[4]||(t[4]=(...a)=>n.load&&n.load(...a)),class:"border dark:border-gray-600 px-3 py-2 rounded dark:bg-gray-700 dark:text-white"},t[9]||(t[9]=[e("option",{value:""},"All Status",-1),e("option",{value:"1"},"Active",-1),e("option",{value:"0"},"Inactive",-1)]),544),[[_,r.filters.is_active]])]),e("div",T,[e("table",P,[t[12]||(t[12]=e("thead",{class:"bg-gray-100 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"p-3 text-left dark:text-gray-200"},"Code"),e("th",{class:"p-3 text-left dark:text-gray-200"},"Name"),e("th",{class:"p-3 text-left dark:text-gray-200"},"Contact"),e("th",{class:"p-3 text-left dark:text-gray-200"},"Payment Terms"),e("th",{class:"p-3 text-center dark:text-gray-200"},"Status"),e("th",{class:"p-3 text-center dark:text-gray-200"},"Actions")])],-1)),e("tbody",null,[r.loading?(i(),d("tr",A,t[10]||(t[10]=[e("td",{colspan:"6",class:"p-4 text-center dark:text-gray-300"},"Loading...",-1)]))):r.customers.length?(i(!0),d(m,{key:2},b(r.customers,a=>(i(),d("tr",{key:a.id,class:"border-t dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"},[e("td",V,o(a.code),1),e("td",j,[e("div",D,o(a.name),1),e("div",F,o(a.email),1)]),e("td",I,[a.phone?(i(),d("div",B,"ðŸ“ž "+o(a.phone),1)):g("",!0),a.contact_person?(i(),d("div",M,o(a.contact_person),1)):g("",!0)]),e("td",E,o(n.formatPaymentTerms(a.payment_terms)),1),e("td",L,[e("span",{class:f([a.is_active?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300","px-2 py-1 rounded text-xs"])},o(a.is_active?"Active":"Inactive"),3)]),e("td",U,[e("div",z,[e("button",{onClick:p=>s.$router.push(`/app/invoices/customers/${a.id}`),class:"text-blue-600 dark:text-blue-400 hover:text-blue-800",title:"View"}," ðŸ‘ ",8,G),e("button",{onClick:p=>s.$router.push(`/app/invoices/customers/${a.id}/edit`),class:"text-green-600 dark:text-green-400 hover:text-green-800",title:"Edit"}," âœï¸ ",8,H),e("button",{onClick:p=>n.confirmDelete(a),class:"text-red-600 dark:text-red-400 hover:text-red-800",title:"Delete"}," ðŸ—‘ ",8,K)])])]))),128)):(i(),d("tr",S,t[11]||(t[11]=[e("td",{colspan:"6",class:"p-4 text-center text-gray-500 dark:text-gray-400"},"No customers found",-1)])))])])]),r.pagination.total>0?(i(),d("div",q,[e("div",null," Showing "+o(r.pagination.from)+" to "+o(r.pagination.to)+" of "+o(r.pagination.total)+" entries ",1),e("div",J,[e("button",{onClick:t[5]||(t[5]=a=>n.changePage(r.pagination.current_page-1)),disabled:r.pagination.current_page===1,class:"px-3 py-1 border dark:border-gray-600 rounded disabled:opacity-50 dark:bg-gray-700"}," Previous ",8,O),e("button",{onClick:t[6]||(t[6]=a=>n.changePage(r.pagination.current_page+1)),disabled:r.pagination.current_page===r.pagination.last_page,class:"px-3 py-1 border dark:border-gray-600 rounded disabled:opacity-50 dark:bg-gray-700"}," Next ",8,Q)])])):g("",!0)])}const X=y(v,[["render",R]]);export{X as default};
