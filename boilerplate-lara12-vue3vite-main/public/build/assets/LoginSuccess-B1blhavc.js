import{_ as c,u as d,a as n,b as t,k as i,t as u,f as h,o as r}from"./app-CqKlUKfZ.js";const k={name:"LoginSuccess",data(){return{token:null,countdown:3,countdownInterval:null}},created(){const s=this.$route.query.token;s&&(this.token=s,this.fetchUser(s))},beforeDestroy(){this.countdownInterval&&clearInterval(this.countdownInterval)},methods:{async fetchUser(s){try{await fetch("/sanctum/csrf-cookie",{credentials:"include"});const a=(await this.axios.get("/me",{headers:{Authorization:`Bearer ${s}`}})).user;console.log(a);const l=a.authorities.map(o=>o.pivot.authority_id);a.authority_ids=l,d().setUser(a),this.startCountdown()}catch(e){console.error("Gagal ambil data user:",e),this.$router.push({name:"auth"})}},startCountdown(){this.countdownInterval=setInterval(()=>{this.countdown>1?this.countdown--:(clearInterval(this.countdownInterval),this.$router.push({name:"home"}))},1e3)}}},m={class:"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-100 to-blue-300"},x={class:"w-full max-w-md p-8 bg-white rounded-xl shadow-lg border border-blue-200"},f={class:"flex flex-col items-center space-y-4"},p={key:0,class:"w-16 h-16 text-green-500 mb-2",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},w={key:1,class:"text-2xl font-bold text-green-600"},b={key:2,class:"text-gray-700 text-center"},v={key:3,class:"flex flex-col items-center mt-2 space-y-1"},y={class:"flex items-center space-x-2"},_={class:"font-semibold text-blue-600 text-lg"},g={class:"text-xs text-gray-500"},I={key:4,class:"flex flex-col items-center"};function B(s,e,a,l,o,C){return r(),n("div",m,[t("div",x,[t("div",f,[o.token?(r(),n("svg",p,e[1]||(e[1]=[t("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2",fill:"none"},null,-1),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12l2 2l4-4"},null,-1)]))):i("",!0),o.token?(r(),n("h2",w,"Login Berhasil!")):i("",!0),o.token?(r(),n("p",b," Anda berhasil masuk. Anda akan diarahkan ke beranda. ")):i("",!0),o.token?(r(),n("div",v,[t("div",y,[e[2]||(e[2]=t("span",{class:"text-sm text-gray-500"},"Mengalihkan ke beranda dalam",-1)),t("span",_,u(o.countdown),1),e[3]||(e[3]=t("span",{class:"text-sm text-gray-500"},"detik...",-1))]),t("small",g,[e[4]||(e[4]=h(" Tidak diarahkan secara otomatis? ")),t("span",{onClick:e[0]||(e[0]=$=>s.$router.push({name:"home"})),class:"text-blue-600 cursor-pointer hover:underline font-medium"}," Klik di sini untuk ke Beranda ")])])):(r(),n("div",I,e[5]||(e[5]=[t("svg",{class:"w-12 h-12 text-red-400 mb-2",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[t("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2",fill:"none"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 9l-6 6m0-6l6 6"})],-1),t("p",{class:"text-red-500 font-semibold"},"Token tidak ditemukan di URL.",-1)])))])])])}const L=c(k,[["render",B],["__scopeId","data-v-273adba6"]]);export{L as default};
