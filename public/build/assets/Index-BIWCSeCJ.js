import{_ as k,I as x,g as m,o as l,c as d,b as u,a as o,h as y,w as g,F as r,l as w,t as c,k as _}from"./app-BZf51e8l.js";const C={components:{BaseLiteModal:x},data(){return{loading:!1,columns:[{name:"No.",prop:"number"},{name:"Nama",prop:"name"},{name:"Kode",prop:"code"},{name:"Tipe",prop:"type"},{name:"Kota",prop:"city"},{name:"Longitude",prop:"longitude"},{name:"Latitude",prop:"latitude"},{name:"Status",prop:"status"},{name:"Aksi",prop:"actions"}],data:[],count:0,user:{id:"",name:"",email:"",is_active:!0},modalRead:!1,dialogConfirmation:!1,selectedRow:{}}},created(){},mounted(){this.doGetData(),console.log(this.modalRead,"modalRead")},beforeUnmount(){},watch:{modalRead(t){console.log("modalRead:",t)}},methods:{doGetData(){this.loading=!0,this.axios.get("v1/settings/organizations").then(t=>{const e=t.data.data||t.data;this.data=e.map(i=>(i.status=i.is_active==1?"Aktif":"Nonaktif",i.longitude=i.longitude||"-",i.latitude=i.latitude||"-",i)),this.count=t.data.count||e.length}).catch(t=>{console.log(t),this.$emit("showToast","Gagal memuat data organisasi","error")}).finally(()=>this.loading=!1)},handleAdd(){this.$router.push({name:"create-organizations"})},handleDetail(t){this.selectedRow=t,this.modalRead=!0},handleEdit(t){this.modalRead=!1,this.$router.push({name:"update-organizations",params:{id:t.id}})},handleOnClose(t){t===!0?(console.log(t),this.submitDelete()):this.dialogConfirmation=!1},confirmDelete(t){this.selectedRow=t,this.dialogConfirmation=!0},submitDelete(){let t="v1/settings/organizations/"+this.selectedRow.id;this.loading=!0,this.axios.delete(t).then(e=>{this.$emit("showToast",e.message||"Berhasil!","success"),this.dialogConfirmation=!1,this.doGetData()}).catch(e=>{this.loading=!1,this.$emit("showToast",e.message,"error")}).finally(()=>{this.loading=!1})}}},v={class:"p-4 bg-white block sm:flex items-center justify-between border-b border-gray-200 lg:mt-1.5 dark:bg-gray-800 dark:border-gray-700 rounded-xl"},R={class:"w-full mb-1"},D={class:"mb-4"},A={class:"flex justify-between items-center"},B={key:0,class:"bg-green-100 text-green-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded-sm dark:bg-green-900 dark:text-green-300"},N={key:1,class:"bg-red-100 text-red-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded-sm dark:bg-red-900 dark:text-red-300"},T={class:"mb-2 font-semibold leading-none text-gray-900 dark:text-white"},V={class:"mb-4 font-light text-gray-500 sm:mb-5 dark:text-gray-400"};function L(t,e,i,O,s,n){const h=m("confirmation-dialog"),p=m("table-molecule"),f=m("BaseLiteModal");return l(),d(r,null,[u(h,{isVisible:s.dialogConfirmation,title:"Hapus data",loading:s.loading,message:"Apakah kamu yakin ingin menghapus data ini?",confirmText:"Ya, hapus",confirmButtonColor:"red",onOnClose:e[0]||(e[0]=a=>n.handleOnClose(a))},null,8,["isVisible","loading"]),o("div",v,[o("div",R,[o("div",D,[o("div",A,[e[8]||(e[8]=o("h1",{class:"text-xl font-semibold text-gray-900 sm:text-2xl dark:text-white"},"Kelola Organisasi",-1)),o("button",{onClick:e[1]||(e[1]=(...a)=>n.handleAdd&&n.handleAdd(...a)),class:"text-white bg-primary-600 hover:bg-primary-700 focus:ring-4 focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 dark:bg-primary-600 dark:hover:bg-primary-700 focus:outline-none dark:focus:ring-primary-800"},e[7]||(e[7]=[o("svg",{class:"w-4 h-4 mr-2 inline",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),y(" Tambah Organisasi ")]))])]),u(p,{columns:s.columns,data:s.data,loading:s.loading,onDetailClicked:e[2]||(e[2]=a=>n.handleDetail(a)),onEditClicked:e[3]||(e[3]=a=>n.handleEdit(a)),onDeleteClicked:e[4]||(e[4]=a=>n.confirmDelete(a)),onOnAdd:e[5]||(e[5]=a=>n.handleAdd())},{"column-status":g(({row:a})=>[a.is_active?(l(),d("span",B,"Aktif")):(l(),d("span",N,"Nonaktif"))]),_:1},8,["columns","data","loading"])])]),u(f,{show:s.modalRead,title:"Detail",persistent:"",onClose:e[6]||(e[6]=a=>s.modalRead=!1)},{default:g(()=>[o("dl",null,[(l(!0),d(r,null,w(s.columns,(a,b)=>(l(),d(r,{key:b},[a.prop!=="number"&&a.prop!=="actions"?(l(),d(r,{key:0},[o("dt",T,c(a.name),1),o("dd",V,c(s.selectedRow[a.prop]??"-"),1)],64)):_("",!0)],64))),128))])]),_:1},8,["show"])],64)}const E=k(C,[["render",L]]);export{E as default};
