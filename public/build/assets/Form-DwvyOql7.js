import{_ as y,G as l,o as n,c as m,a as t,t as u,e as d,K as f,F as c,l as k,j as a,h as p,i as x}from"./app-BZf51e8l.js";const h={name:"ItemForm",data(){return{loading:!1,isEdit:!1,itemId:null,categories:[],form:{category_id:"",code:"",name:"",unit:"pcs",price:0,quantity:0,area:"",description:"",is_active:!0}}},mounted(){this.itemId=this.$route.params.id,this.isEdit=!!this.itemId,this.loadCategories(),this.isEdit&&this.loadItem()},methods:{async loadCategories(){try{const{data:s}=await l.get("/items/categories");this.categories=s.data}catch(s){console.error("Failed to load categories:",s)}},async loadItem(){this.loading=!0;try{const{data:s}=await l.get(`/items/${this.itemId}`);this.form={...s.data}}catch(s){console.error("Failed to load item:",s),this.$emit("showToast","Failed to load item","error"),this.$router.push("/app/invoices/items")}finally{this.loading=!1}},async submit(){var s,e;this.loading=!0;try{const i={...this.form};i.code||delete i.code,i.category_id||delete i.category_id,this.isEdit?(await l.put(`/items/${this.itemId}`,i),this.$emit("showToast","✅ Item updated successfully","success")):(await l.post("/items",i),this.$emit("showToast","✅ Item created successfully","success")),this.$router.push("/app/invoices/items")}catch(i){const g=((e=(s=i.response)==null?void 0:s.data)==null?void 0:e.message)||"Failed to save item";this.$emit("showToast",g,"error")}finally{this.loading=!1}}}},w={class:"p-6 max-w-4xl mx-auto"},v={class:"mb-6"},I={class:"text-2xl font-bold dark:text-white"},U={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},V=["value"],C={class:"md:col-span-2"},E={class:"md:col-span-2"},F={class:"flex gap-4 mt-6"},S=["disabled"];function q(s,e,i,g,o,b){return n(),m("div",w,[t("div",v,[t("h1",I,u(o.isEdit?"Edit Item":"New Item"),1)]),t("form",{onSubmit:e[9]||(e[9]=x((...r)=>b.submit&&b.submit(...r),["prevent"])),class:"bg-white dark:bg-gray-800 rounded shadow p-6"},[t("div",U,[t("div",null,[e[11]||(e[11]=t("label",{class:"block mb-2 font-medium dark:text-gray-200"},"Category",-1)),d(t("select",{"onUpdate:modelValue":e[0]||(e[0]=r=>o.form.category_id=r),class:"w-full border dark:border-gray-600 px-3 py-2 rounded dark:bg-gray-700 dark:text-white"},[e[10]||(e[10]=t("option",{value:""},"Select Category",-1)),(n(!0),m(c,null,k(o.categories,r=>(n(),m("option",{key:r.id,value:r.id},u(r.name),9,V))),128))],512),[[f,o.form.category_id]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block mb-2 font-medium dark:text-gray-200"},"Item Code",-1)),d(t("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>o.form.code=r),type:"text",class:"w-full border dark:border-gray-600 px-3 py-2 rounded dark:bg-gray-700 dark:text-white",placeholder:"Leave empty to auto-generate"},null,512),[[a,o.form.code]])]),t("div",C,[e[13]||(e[13]=t("label",{class:"block mb-2 font-medium dark:text-gray-200"},[p("Item Name "),t("span",{class:"text-red-500"},"*")],-1)),d(t("input",{"onUpdate:modelValue":e[2]||(e[2]=r=>o.form.name=r),type:"text",required:"",class:"w-full border dark:border-gray-600 px-3 py-2 rounded dark:bg-gray-700 dark:text-white",placeholder:"Item name"},null,512),[[a,o.form.name]])]),t("div",null,[e[14]||(e[14]=t("label",{class:"block mb-2 font-medium dark:text-gray-200"},[p("Unit "),t("span",{class:"text-red-500"},"*")],-1)),d(t("input",{"onUpdate:modelValue":e[3]||(e[3]=r=>o.form.unit=r),type:"text",required:"",class:"w-full border dark:border-gray-600 px-3 py-2 rounded dark:bg-gray-700 dark:text-white",placeholder:"pcs, kg, box, etc."},null,512),[[a,o.form.unit]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block mb-2 font-medium dark:text-gray-200"},[p("Price "),t("span",{class:"text-red-500"},"*")],-1)),d(t("input",{"onUpdate:modelValue":e[4]||(e[4]=r=>o.form.price=r),type:"number",min:"0",step:"0.01",required:"",class:"w-full border dark:border-gray-600 px-3 py-2 rounded dark:bg-gray-700 dark:text-white",placeholder:"0.00"},null,512),[[a,o.form.price]])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block mb-2 font-medium dark:text-gray-200"},"Initial Stock",-1)),d(t("input",{"onUpdate:modelValue":e[5]||(e[5]=r=>o.form.quantity=r),type:"number",min:"0",class:"w-full border dark:border-gray-600 px-3 py-2 rounded dark:bg-gray-700 dark:text-white",placeholder:"0"},null,512),[[a,o.form.quantity]])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block mb-2 font-medium dark:text-gray-200"},"Storage Area",-1)),d(t("input",{"onUpdate:modelValue":e[6]||(e[6]=r=>o.form.area=r),type:"text",class:"w-full border dark:border-gray-600 px-3 py-2 rounded dark:bg-gray-700 dark:text-white",placeholder:"Shelf A, Warehouse 1, etc."},null,512),[[a,o.form.area]])]),t("div",E,[e[18]||(e[18]=t("label",{class:"block mb-2 font-medium dark:text-gray-200"},"Description",-1)),d(t("textarea",{"onUpdate:modelValue":e[7]||(e[7]=r=>o.form.description=r),rows:"3",class:"w-full border dark:border-gray-600 px-3 py-2 rounded dark:bg-gray-700 dark:text-white",placeholder:"Item description..."},null,512),[[a,o.form.description]])])]),t("div",F,[t("button",{type:"submit",disabled:o.loading,class:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded disabled:opacity-50"},u(o.loading?"Saving...":o.isEdit?"Update":"Create"),9,S),t("button",{type:"button",onClick:e[8]||(e[8]=r=>s.$router.push("/app/invoices/items")),class:"bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 px-6 py-2 rounded dark:text-white"}," Cancel ")])],32)])}const N=y(h,[["render",q]]);export{N as default};
