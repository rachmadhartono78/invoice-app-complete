import{s as k}from"./index-CfpBvlcq.js";import{_ as x,g as f,o as m,c as u,b as y,a as e,t as b,e as s,j as l,K as v,f as w,J as C,i as h,v as g}from"./app-BZf51e8l.js";const V={data(){return{loading:!1,form:{name:"",code:"",type:"",city:"",address:"",longitude:null,latitude:null,organization_id:null,is_active:!0},modalCreate:null,dialogConfirmation:!1,typeSubmit:"",id:"",organizations:[]}},created(){this.id=this.$route.params.id,this.loadOrganizations(),this.id&&this.doGetDataDetail(this.id)},mounted(){},beforeUnmount(){},watch:{},methods:{loadOrganizations(){this.loading=!0,this.axios.get("v1/settings/organizations").then(o=>{this.organizations=(o.data.data||o.data).filter(r=>r.id!==this.id)}).catch(o=>{console.log(o),this.$emit("showToast","Gagal memuat data organisasi","error")}).finally(()=>this.loading=!1)},doGetDataDetail(o){this.loading=!0,this.axios.get(`v1/settings/organizations/${o}`).then(r=>{this.form=r.data.data||r.data,this.form.is_active=!!this.form.is_active}).catch(r=>{console.log(r),this.$emit("showToast","Gagal memuat detail organisasi","error")}).finally(()=>this.loading=!1)},confirmSubmit(o){if(!this.form.name||!this.form.code||!this.form.type||!this.form.city){this.$emit("showToast","Harap lengkapi semua field yang wajib diisi","error");return}this.dialogConfirmation=!0},handleTypeSubmit(o){this.typeSubmit=o},resetForm(){this.form={name:"",code:"",type:"",city:"",address:"",longitude:null,latitude:null,organization_id:null,is_active:!0}},handleOnClose(o){o===!0?this.submit():this.dialogConfirmation=!1},handleDepartmentSelect(o){},submit(){let o="v1/settings/organizations";this.loading=!0;const r={...this.form};r.is_active=this.form.is_active?1:0,r.longitude===""&&(r.longitude=null),r.latitude===""&&(r.latitude=null),r.organization_id===""&&(r.organization_id=null);const p={indices:!1,nullsAsUndefineds:!1,booleansAsIntegers:!1,allowEmptyArrays:!1,noFilesWithArrayNotation:!1,dotsForObjectNotation:!1};let n=new FormData;n=k.serialize(r,p),this.id&&(o+="/"+this.id,n.append("_method","PUT")),this.axios.post(o,n).then(t=>{var a;this.$emit("showToast",((a=t.data)==null?void 0:a.message)||"Berhasil!","success"),this.dialogConfirmation=!1,this.typeSubmit==="createNew"?this.resetForm():this.$router.push({name:"index-organizations"})}).catch(t=>{var a,d;this.loading=!1,console.error("Error submitting organization:",t),this.$emit("showToast",((d=(a=t.response)==null?void 0:a.data)==null?void 0:d.message)||t.message,"error")}).finally(()=>{this.loading=!1})}}},S={class:"relative sm:p-4 xs:p-0 w-full h-full md:h-auto"},z={class:"relative p-4 bg-white rounded-lg shadow dark:bg-gray-800 sm:p-5"},U={class:"flex justify-between items-center pb-4 mb-4 rounded-t border-b sm:mb-5 dark:border-gray-600"},O={class:"text-lg font-semibold text-gray-900 dark:text-white"},T={class:"grid gap-4 mb-4 sm:grid-cols-2"},j={class:"flex items-center"},D={class:"flex items-center h-5"},M={class:"col-span-2"},B={class:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 mt-5"},N={class:"mr-1 -ml-1 w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},A={class:"mr-1 -ml-1 w-6 h-6","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"};function K(o,r,p,n,t,a){const d=f("confirmation-dialog"),c=f("autocomplete");return m(),u("div",null,[y(d,{isVisible:t.dialogConfirmation,title:"Simpan data",loading:t.loading,message:"Apakah kamu yakin ingin menyimpan data ini?",onOnClose:r[0]||(r[0]=i=>a.handleOnClose(i))},null,8,["isVisible","loading"]),e("form",{onSubmit:r[13]||(r[13]=h((...i)=>a.confirmSubmit&&a.confirmSubmit(...i),["prevent"]))},[e("div",S,[e("div",z,[e("div",U,[e("h3",O,b(t.id?"Ubah":"Tambah")+" Organisasi ",1)]),e("div",T,[e("div",null,[r[14]||(r[14]=e("label",{for:"name",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Nama Organisasi",-1)),s(e("input",{type:"text",name:"name",id:"name","onUpdate:modelValue":r[1]||(r[1]=i=>t.form.name=i),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Nama Organisasi",required:""},null,512),[[l,t.form.name]])]),e("div",null,[r[15]||(r[15]=e("label",{for:"code",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Kode Organisasi",-1)),s(e("input",{type:"text",name:"code",id:"code","onUpdate:modelValue":r[2]||(r[2]=i=>t.form.code=i),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Kode Organisasi",required:""},null,512),[[l,t.form.code]])]),e("div",null,[r[17]||(r[17]=e("label",{for:"type",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Tipe Organisasi",-1)),s(e("select",{name:"type",id:"type","onUpdate:modelValue":r[3]||(r[3]=i=>t.form.type=i),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",required:""},r[16]||(r[16]=[w('<option value="">Pilih Tipe</option><option value="headquarters">Kantor Pusat</option><option value="branch">Cabang</option><option value="division">Divisi</option><option value="department">Departemen</option><option value="unit">Unit</option>',6)]),512),[[v,t.form.type]])]),e("div",null,[r[18]||(r[18]=e("label",{for:"city",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Kota",-1)),s(e("input",{type:"text",name:"city",id:"city","onUpdate:modelValue":r[4]||(r[4]=i=>t.form.city=i),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Kota",required:""},null,512),[[l,t.form.city]])]),e("div",null,[r[19]||(r[19]=e("label",{for:"longitude",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Longitude",-1)),s(e("input",{type:"number",step:"any",name:"longitude",id:"longitude","onUpdate:modelValue":r[5]||(r[5]=i=>t.form.longitude=i),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"107.6191"},null,512),[[l,t.form.longitude]])]),e("div",null,[r[20]||(r[20]=e("label",{for:"latitude",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Latitude",-1)),s(e("input",{type:"number",step:"any",name:"latitude",id:"latitude","onUpdate:modelValue":r[6]||(r[6]=i=>t.form.latitude=i),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"-6.9175"},null,512),[[l,t.form.latitude]])]),e("div",null,[r[21]||(r[21]=e("label",{for:"organization_id",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Organisasi Induk",-1)),y(c,{items:t.organizations,placeholder:"Cari organisasi induk...","label-key":"name","value-key":"id",modelValue:t.form.organization_id,"onUpdate:modelValue":r[7]||(r[7]=i=>t.form.organization_id=i)},null,8,["items","modelValue"])]),e("div",j,[e("div",D,[s(e("input",{id:"is_active",type:"checkbox","onUpdate:modelValue":r[8]||(r[8]=i=>t.form.is_active=i),class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[C,t.form.is_active]])]),r[22]||(r[22]=e("div",{class:"ml-2 text-sm"},[e("label",{for:"is_active",class:"font-medium text-gray-900 dark:text-gray-300"}," Status Aktif "),e("p",{class:"text-xs font-normal text-gray-500 dark:text-gray-300"}," Centang jika organisasi ini aktif ")],-1))]),e("div",M,[r[23]||(r[23]=e("label",{for:"address",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Alamat",-1)),s(e("textarea",{name:"address",id:"address",rows:"3","onUpdate:modelValue":r[9]||(r[9]=i=>t.form.address=i),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Alamat lengkap organisasi"},null,512),[[l,t.form.address]])])])]),e("div",B,[e("button",{type:"button",onClick:r[10]||(r[10]=h(i=>o.$router.push({name:"index-organizations"}),["prevent"])),class:"text-gray-600 dark:text-white hover:text-white flex items-center justify-center w-full sm:w-auto border border-gray-700 dark:border-gray-500 hover:bg-gray-600 focus:ring-4 focus:outline-none focus:ring-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:hover:bg-gray-700 dark:focus:ring-primary-800"},r[24]||(r[24]=[e("svg",{class:"mr-1 -ml-1 w-6 h-6","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m14 8-4 4 4 4"})],-1),e("span",null,"Kembali",-1)])),s(e("button",{type:"submit",onClick:r[11]||(r[11]=i=>a.handleTypeSubmit("createNew")),class:"text-primary-600 dark:text-primary-300 hover:text-white flex items-center justify-center space-x-2 w-full sm:w-auto border border-primary-700 hover:border-primary-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:hover:bg-primary-700 dark:focus:ring-primary-800"},r[25]||(r[25]=[e("svg",{class:"mr-1 -ml-1 w-6 h-6","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},[e("path",{stroke:"currentColor","stroke-linecap":"square","stroke-linejoin":"round","stroke-width":"2",d:"M16.5 15v1.5m0 0V18m0-1.5H15m1.5 0H18M3 9V6a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v3M3 9v6a1 1 0 0 0 1 1h5M3 9h16m0 0v1M6 12h3m12 4.5a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0Z"})],-1),e("span",null,"Simpan & Buat baru",-1)]),512),[[g,!t.id]]),e("button",{type:"submit",onClick:r[12]||(r[12]=i=>a.handleTypeSubmit("create")),class:"text-white flex items-center justify-center w-full sm:w-auto bg-primary-600 hover:bg-primary-800 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800"},[s((m(),u("svg",N,r[26]||(r[26]=[e("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"},null,-1)]),512)),[[g,!t.id]]),s((m(),u("svg",A,r[27]||(r[27]=[e("path",{stroke:"currentColor","stroke-linejoin":"round","stroke-width":"1.5",d:"M4 5a1 1 0 0 1 1-1h11.586a1 1 0 0 1 .707.293l2.414 2.414a1 1 0 0 1 .293.707V19a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V5Z"},null,-1),e("path",{stroke:"currentColor","stroke-linejoin":"round","stroke-width":"1",d:"M8 4h8v4H8V4Zm7 10a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"},null,-1)]),512)),[[g,t.id]]),e("span",null,b(t.id?"Simpan perubahan":"Simpan"),1)])])])],32)])}const F=x(V,[["render",K]]);export{F as default};
