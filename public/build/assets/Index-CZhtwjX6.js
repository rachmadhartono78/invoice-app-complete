import{_ as h,G as g,g as _,o as l,c as d,a as r,b as x,w as m,s as y,t as c,k as u}from"./app-yrMyzsrH.js";const f={name:"CustomerIndex",data(){return{customers:[],loading:!1,filters:{search:"",is_active:""},pagination:{current_page:1,last_page:1,per_page:10,total:0,from:0,to:0},columns:[{name:"Code",prop:"code"},{name:"Name",prop:"name"},{name:"Contact",prop:"contact"},{name:"Payment Terms",prop:"payment_terms_label"},{name:"Status",prop:"status"},{name:"Action",prop:"actions"}]}},mounted(){this.load()},methods:{async load(){this.loading=!0;try{const t={page:this.pagination.current_page,per_page:this.pagination.per_page,...this.filters},e=await g.get("/customers",{params:t}),n=(e==null?void 0:e.data)||[];this.customers=n.map(i=>({...i,payment_terms_label:this.formatPaymentTerms(i.payment_terms),actions:{canUpdate:!0,canDelete:!0}})),this.pagination={current_page:(e==null?void 0:e.current_page)||1,last_page:(e==null?void 0:e.last_page)||1,per_page:(e==null?void 0:e.per_page)||10,total:(e==null?void 0:e.total)||0,from:(e==null?void 0:e.from)||0,to:(e==null?void 0:e.to)||0}}catch(t){console.error("Failed to load customers:",t),this.customers=[],this.$emit("showToast","Failed to load customers","error")}finally{this.loading=!1}},changePage(t){this.pagination.current_page=t,this.load()},handleSearch(t){this.filters.search=t,this.pagination.current_page=1,this.load()},navigateToAdd(){this.$router.push("/app/invoices/customers/create")},navigateToDetail(t){this.$router.push(`/app/invoices/customers/${t.id}`)},navigateToEdit(t){this.$router.push(`/app/invoices/customers/${t.id}/edit`)},formatPaymentTerms(t){return{cash:"Cash",net_7:"Net 7",net_14:"Net 14",net_30:"Net 30",net_45:"Net 45",net_60:"Net 60"}[t]||t},async confirmDelete(t){var e,n;if(confirm(`Are you sure you want to delete customer "${t.name}"?`))try{await g.delete(`/customers/${t.id}`),this.$emit("showToast","Customer deleted successfully","success"),this.load()}catch(i){const s=((n=(e=i.response)==null?void 0:e.data)==null?void 0:n.message)||"Failed to delete customer";this.$emit("showToast",s,"error")}}}},b={class:"p-4 bg-white block sm:flex items-center justify-between border-b border-gray-200 lg:mt-1.5 dark:bg-gray-800 dark:border-gray-700 rounded-xl"},k={class:"w-full mb-1"},v={key:0},C={key:1,class:"text-xs text-gray-500 dark:text-gray-400"},T={class:"font-medium text-gray-900 dark:text-white"},D={class:"text-xs text-gray-500 dark:text-gray-400"};function w(t,e,n,i,s,o){const p=_("table-molecule");return l(),d("div",b,[r("div",k,[e[0]||(e[0]=r("div",{class:"mb-4"},[r("h1",{class:"text-xl font-semibold text-gray-900 sm:text-2xl dark:text-white"},"Customers")],-1)),x(p,{columns:s.columns,data:s.customers,loading:s.loading,"server-side":!0,"total-items":s.pagination.total,"per-page":s.pagination.per_page,"current-page":s.pagination.current_page,"show-add-button":!0,"with-checkbox":!1,onPageChange:o.changePage,onSearch:o.handleSearch,onOnAdd:o.navigateToAdd,onDetailClicked:o.navigateToDetail,onEditClicked:o.navigateToEdit,onDeleteClicked:o.confirmDelete},{"column-status":m(({row:a})=>[r("span",{class:y([a.is_active?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300","px-2.5 py-0.5 rounded text-xs font-medium"])},c(a.is_active?"Active":"Inactive"),3)]),"column-contact":m(({row:a})=>[a.phone?(l(),d("div",v,c(a.phone),1)):u("",!0),a.contact_person?(l(),d("div",C," CP: "+c(a.contact_person),1)):u("",!0)]),"column-name":m(({row:a})=>[r("div",T,c(a.name),1),r("div",D,c(a.email),1)]),_:1},8,["columns","data","loading","total-items","per-page","current-page","onPageChange","onSearch","onOnAdd","onDetailClicked","onEditClicked","onDeleteClicked"])])])}const A=h(f,[["render",w]]);export{A as default};
