import{_ as b,G as m,o as l,c as n,a as r,t as g,i as f,e as i,K as x,F as k,l as h,h as u,j as d,v as c}from"./app-yrMyzsrH.js";const w={name:"ItemForm",data(){return{loading:!1,isEdit:!1,itemId:null,categories:[],form:{category_id:"",code:"",name:"",unit:"pcs",price:0,quantity:0,area:"",description:"",is_active:!0}}},mounted(){this.itemId=this.$route.params.id,this.isEdit=!!this.itemId,this.loadCategories(),this.isEdit&&this.loadItem()},methods:{async loadCategories(){try{const{data:s}=await m.get("/items/categories");this.categories=s.data}catch(s){console.error("Failed to load categories:",s)}},async loadItem(){this.loading=!0;try{const{data:s}=await m.get(`/items/${this.itemId}`);this.form={...s.data}}catch(s){console.error("Failed to load item:",s),this.$emit("showToast","Failed to load item","error"),this.$router.push("/app/invoices/items")}finally{this.loading=!1}},async submit(){var s,e;this.loading=!0;try{const a={...this.form};a.code||delete a.code,a.category_id||delete a.category_id,this.isEdit?(await m.put(`/items/${this.itemId}`,a),this.$emit("showToast","✅ Item updated successfully","success")):(await m.post("/items",a),this.$emit("showToast","✅ Item created successfully","success")),this.$router.push("/app/invoices/items")}catch(a){const p=((e=(s=a.response)==null?void 0:s.data)==null?void 0:e.message)||"Failed to save item";this.$emit("showToast",p,"error")}finally{this.loading=!1}}}},v={class:"relative sm:p-4 xs:p-0 w-full h-full md:h-auto"},I={class:"relative p-4 bg-white rounded-lg shadow dark:bg-gray-800 sm:p-5"},V={class:"flex justify-between items-center pb-4 mb-4 rounded-t border-b sm:mb-5 dark:border-gray-600"},C={class:"text-lg font-semibold text-gray-900 dark:text-white"},E={class:"grid gap-4 mb-4 sm:grid-cols-2"},S=["value"],U={class:"sm:col-span-2"},q={class:"sm:col-span-2"},F={class:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 mt-5"},j=["disabled"],B={class:"mr-1 -ml-1 w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},M={class:"mr-1 -ml-1 w-6 h-6","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"};function T(s,e,a,p,t,y){return l(),n("div",null,[r("div",v,[r("div",I,[r("div",V,[r("h3",C,g(t.isEdit?"Edit Item":"New Item"),1)]),r("form",{onSubmit:e[9]||(e[9]=f((...o)=>y.submit&&y.submit(...o),["prevent"]))},[r("div",E,[r("div",null,[e[11]||(e[11]=r("label",{for:"category_id",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Category",-1)),i(r("select",{id:"category_id","onUpdate:modelValue":e[0]||(e[0]=o=>t.form.category_id=o),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"},[e[10]||(e[10]=r("option",{value:""},"Select Category",-1)),(l(!0),n(k,null,h(t.categories,o=>(l(),n("option",{key:o.id,value:o.id},g(o.name),9,S))),128))],512),[[x,t.form.category_id]])]),r("div",null,[e[12]||(e[12]=r("label",{for:"code",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},[u(" Item Code "),r("span",{class:"text-gray-400 text-xs"},"(Auto)")],-1)),i(r("input",{type:"text",id:"code","onUpdate:modelValue":e[1]||(e[1]=o=>t.form.code=o),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",placeholder:"Leave empty to auto-generate"},null,512),[[d,t.form.code]])]),r("div",U,[e[13]||(e[13]=r("label",{for:"name",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},[u(" Item Name "),r("span",{class:"text-red-500"},"*")],-1)),i(r("input",{type:"text",id:"name","onUpdate:modelValue":e[2]||(e[2]=o=>t.form.name=o),required:"",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",placeholder:"Item name"},null,512),[[d,t.form.name]])]),r("div",null,[e[14]||(e[14]=r("label",{for:"unit",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},[u(" Unit "),r("span",{class:"text-red-500"},"*")],-1)),i(r("input",{type:"text",id:"unit","onUpdate:modelValue":e[3]||(e[3]=o=>t.form.unit=o),required:"",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",placeholder:"pcs, kg, box, etc."},null,512),[[d,t.form.unit]])]),r("div",null,[e[15]||(e[15]=r("label",{for:"price",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},[u(" Price "),r("span",{class:"text-red-500"},"*")],-1)),i(r("input",{type:"number",id:"price","onUpdate:modelValue":e[4]||(e[4]=o=>t.form.price=o),min:"0",step:"0.01",required:"",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",placeholder:"0.00"},null,512),[[d,t.form.price]])]),r("div",null,[e[16]||(e[16]=r("label",{for:"quantity",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Initial Stock",-1)),i(r("input",{type:"number",id:"quantity","onUpdate:modelValue":e[5]||(e[5]=o=>t.form.quantity=o),min:"0",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",placeholder:"0"},null,512),[[d,t.form.quantity]])]),r("div",null,[e[17]||(e[17]=r("label",{for:"area",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Storage Area",-1)),i(r("input",{type:"text",id:"area","onUpdate:modelValue":e[6]||(e[6]=o=>t.form.area=o),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",placeholder:"Shelf A, Warehouse 1, etc."},null,512),[[d,t.form.area]])]),r("div",q,[e[18]||(e[18]=r("label",{for:"description",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Description",-1)),i(r("textarea",{id:"description","onUpdate:modelValue":e[7]||(e[7]=o=>t.form.description=o),rows:"3",class:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",placeholder:"Item description..."},null,512),[[d,t.form.description]])])]),r("div",F,[r("button",{type:"button",onClick:e[8]||(e[8]=o=>s.$router.push("/app/invoices/items")),class:"text-gray-600 dark:text-white hover:text-white flex items-center justify-center w-full sm:w-auto border border-gray-700 dark:border-gray-500 hover:bg-gray-600 focus:ring-4 focus:outline-none focus:ring-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:hover:bg-gray-700 dark:focus:ring-primary-800"},e[19]||(e[19]=[r("svg",{class:"mr-1 -ml-1 w-6 h-6","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},[r("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m14 8-4 4 4 4"})],-1),r("span",null,"Back",-1)])),r("button",{type:"submit",disabled:t.loading,class:"text-white flex items-center justify-center w-full sm:w-auto bg-primary-600 hover:bg-primary-800 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800 disabled:opacity-50"},[i((l(),n("svg",B,e[20]||(e[20]=[r("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"},null,-1)]),512)),[[c,!t.isEdit]]),i((l(),n("svg",M,e[21]||(e[21]=[r("path",{stroke:"currentColor","stroke-linejoin":"round","stroke-width":"1.5",d:"M4 5a1 1 0 0 1 1-1h11.586a1 1 0 0 1 .707.293l2.414 2.414a1 1 0 0 1 .293.707V19a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V5Z"},null,-1),r("path",{stroke:"currentColor","stroke-linejoin":"round","stroke-width":"1",d:"M8 4h8v4H8V4Zm7 10a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"},null,-1)]),512)),[[c,t.isEdit]]),r("span",null,g(t.loading?"Saving...":t.isEdit?"Save Changes":"Create"),1)],8,j)])],32)])])])}const N=b(w,[["render",T]]);export{N as default};
