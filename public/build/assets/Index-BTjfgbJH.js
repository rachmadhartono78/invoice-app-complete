import{_ as k,I as x,g as m,o as i,c as n,b as u,a,w as c,F as r,l as _,t as g,k as w}from"./app-yrMyzsrH.js";const y={components:{BaseLiteModal:x},data(){return{loading:!1,columns:[{name:"No.",prop:"number"},{name:"Nama",prop:"name"},{name:"Kode",prop:"code"},{name:"Deskripsi",prop:"description"},{name:"Aksi",prop:"actions"}],data:[],count:0,user:{id:"",name:"",email:"",is_active:!0},modalRead:!1,dialogConfirmation:!1,selectedRow:{}}},created(){},mounted(){this.doGetData()},beforeUnmount(){},watch:{},methods:{doGetData(){this.loading=!0,this.axios.get("v1/settings/authorities").then(s=>{const e=s.data;this.data=e.map(l=>(l.status=l.is_active==1?"Active":"Inactive",l.actions={canUpdate:!0},l))}).catch(s=>{console.log(s)}).finally(()=>this.loading=!1)},handleAdd(){this.$router.push({name:"create-authorities"})},handleDetail(s){this.selectedRow=s,this.modalRead=!0},handleEdit(s){this.modalRead=!1,this.$router.push({name:"update-authorities",params:{id:s.id}})},handleOnClose(s){s===!0?(console.log(s),this.submitDelete()):this.dialogConfirmation=!1},confirmDelete(s){this.selectedRow=s,this.dialogConfirmation=!0},submitDelete(){let s="v1/settings/authorities/"+this.selectedRow.id;this.loading=!0,this.axios.delete(s).then(e=>{this.$emit("showToast",e.message||"Berhasil!","success"),this.dialogConfirmation=!1,this.doGetData()}).catch(e=>{this.loading=!1,this.$emit("showToast",e.message,"error")}).finally(()=>{this.loading=!1})}}},C={class:"p-4 bg-white block sm:flex items-center justify-between border-b border-gray-200 lg:mt-1.5 dark:bg-gray-800 dark:border-gray-700 rounded-xl"},D={class:"w-full mb-1"},R={key:0,class:"bg-green-100 text-green-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded-sm dark:bg-green-900 dark:text-green-300"},v={key:1,class:"bg-red-100 text-red-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded-sm dark:bg-red-900 dark:text-red-300"},B={class:"mb-2 font-semibold leading-none text-gray-900 dark:text-white"},A={class:"mb-4 font-light text-gray-500 sm:mb-5 dark:text-gray-400"};function N(s,e,l,O,o,d){const h=m("confirmation-dialog"),p=m("table-molecule"),f=m("BaseLiteModal");return i(),n(r,null,[u(h,{isVisible:o.dialogConfirmation,title:"Hapus data",loading:o.loading,message:"Apakah kamu yakin ingin menghapus data ini?",confirmText:"Ya, hapus",confirmButtonColor:"red",onOnClose:e[0]||(e[0]=t=>d.handleOnClose(t))},null,8,["isVisible","loading"]),a("div",C,[a("div",D,[e[6]||(e[6]=a("div",{class:"mb-4"},[a("h1",{class:"text-xl font-semibold text-gray-900 sm:text-2xl dark:text-white"},"Kelola Otoritas")],-1)),u(p,{columns:o.columns,data:o.data,loading:o.loading,onDetailClicked:e[1]||(e[1]=t=>d.handleDetail(t)),onEditClicked:e[2]||(e[2]=t=>d.handleEdit(t)),onDeleteClicked:e[3]||(e[3]=t=>d.confirmDelete(t)),showAddButton:"",onOnAdd:e[4]||(e[4]=t=>d.handleAdd())},{"column-status":c(({row:t})=>[t.is_active?(i(),n("span",R,"Aktif")):(i(),n("span",v,"Nonaktif"))]),_:1},8,["columns","data","loading"])])]),u(f,{show:o.modalRead,title:"Detail",persistent:"",onClose:e[5]||(e[5]=t=>o.modalRead=!1)},{default:c(()=>[a("dl",null,[(i(!0),n(r,null,_(o.columns,(t,b)=>(i(),n(r,{key:b},[t.prop!=="number"&&t.prop!=="actions"?(i(),n(r,{key:0},[a("dt",B,g(t.name),1),a("dd",A,g(o.selectedRow[t.prop]??"-"),1)],64)):w("",!0)],64))),128))])]),_:1},8,["show"])],64)}const E=k(y,[["render",N]]);export{E as default};
